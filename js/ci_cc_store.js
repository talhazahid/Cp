(function(V){var E=V.fn.domManip,S="_tmplitem",F=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,U={},Q={},R,G={key:0,data:{}},N=0,T=0,K=[];function P(b,i,a,f){var j={data:f||(f===0||f===false)?f:i?i.data:{},_wrap:i?i._wrap:null,tmpl:null,parent:i||null,nodes:[],calls:B,nest:z,wrap:y,html:A,update:C};b&&V.extend(j,b,{nodes:[],parent:i});if(a){j.tmpl=a;j._ctnt=j._ctnt||j.tmpl(V,j);j.key=++N;(K.length?Q:U)[N]=j}return j}V.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){V.fn[a]=function(r){var q=[],o=V(r),e,p,c,d,f=this.length===1&&this[0].parentNode;R=U||{};if(f&&f.nodeType===11&&f.childNodes.length===1&&o.length===1){o[b](this[0]);q=this}else{for(p=0,c=o.length;p<c;p++){T=p;e=(p>0?this.clone(true):this).get();V(o[p])[b](e);q=q.concat(e)}T=0;q=this.pushStack(q,a,o.selector)}d=R;R=null;V.tmpl.complete(d);return q}});V.fn.extend({tmpl:function(e,f,a){return V.tmpl(this[0],e,f,a)},tmplItem:function(){return V.tmplItem(this[0])},template:function(a){return V.template(a,this[0])},domManip:function(p,a,b){if(p[0]&&V.isArray(p[0])){var n=V.makeArray(arguments),l=p[0],c=l.length,e=0,o;while(e<c&&!(o=V.data(l[e++],"tmplItem"))){}if(o&&T){n[2]=function(d){V.tmpl.afterManip(this,d,b)}}E.apply(this,n)}else{E.apply(this,arguments)}T=0;!R&&V.tmpl.complete(U);return this}});V.extend({tmpl:function(j,f,g,l){var b,a=!l;if(a){l=G;j=V.template[j]||V.template(null,j);Q={}}else{if(!j){j=l.tmpl;U[l.key]=l;l.nodes=[];l.wrapped&&I(l,l.wrapped);return V(M(l,null,l.tmpl(V,l)))}}if(!j){return[]}if(typeof f==="function"){f=f.call(l||{})}g&&g.wrapped&&I(g,g.wrapped);b=V.isArray(f)?V.map(f,function(c){return c?P(g,l,j,c):null}):[P(g,l,j,f)];return a?V(M(l,null,b)):b},tmplItem:function(a){var d;if(a instanceof V){a=a[0]}while(a&&a.nodeType===1&&!(d=V.data(a,"tmplItem"))&&(a=a.parentNode)){}return d||G},template:function(d,a){if(a){if(typeof a==="string"){a=H(a)}else{if(a instanceof V){a=a[0]||{}}}if(a.nodeType){a=V.data(a,"tmpl")||V.data(a,"tmpl",H(a.innerHTML))}return typeof d==="string"?(V.template[d]=a):a}return d?typeof d!=="string"?V.template(null,d):V.template[d]||V.template(null,F.test(d)?d:V(d)):null},encode:function(b){return(""+b).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});V.extend(V.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){U={}},afterManip:function(c,a,h){var g=a.nodeType===11?V.makeArray(a.childNodes):a.nodeType===1?[a]:[];h.call(c,a);J(g);T++}});function M(i,d,h){var a,j=h?V.map(h,function(b){return typeof b==="string"?i.key?b.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+S+'="'+i.key+'" $2'):b:M(b,i,b._ctnt)}):i;if(d){return j}j=j.join("");j.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(b,l,g,k){a=V(g).get();J(a);if(l){a=L(l).concat(a)}if(k){a=a.concat(L(k))}});return a?a:L(j)}function L(d){var a=document.createElement("div");a.innerHTML=d;return V.makeArray(a.childNodes)}function H(a){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+V.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(h,n,o,r,w,v,u){var p=V.tmpl.tag[o],q,t,s;if(!p){throw"Unknown template tag: "+o}q=p._default||[];if(v&&!/\w$/.test(w)){w+=v;v=""}if(w){w=O(w);u=u?","+O(u)+")":v?")":"";t=v?w.indexOf(".")>-1?w+O(v):"("+w+").call($item"+u:w;s=v?t:"(typeof("+w+")==='function'?("+w+").call($item):("+w+"))"}else{s=t=q.$1||"null"}r=O(r);return"');"+p[n?"close":"open"].split("$notnull_1").join(w?"typeof("+w+")!=='undefined' && ("+w+")!=null":"true").split("$1a").join(s).split("$1").join(t).split("$2").join(r||q.$2||"")+"__.push('"})+"');}return __;")}function I(d,a){d._wrap=M(d,true,V.isArray(a)?a:[F.test(a)?a:V(a).html()]).join("")}function O(b){return b?b.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function D(c){var d=document.createElement("div");d.appendChild(c.cloneNode(true));return d.innerHTML}function J(b){var c="_"+T,g,i,f={},r,a,q;for(r=0,a=b.length;r<a;r++){if((g=b[r]).nodeType!==1){continue}i=g.getElementsByTagName("*");for(q=i.length-1;q>=0;q--){d(i[q])}d(g)}function d(s){var v,t=s,n,u,l;if(l=s.getAttribute(S)){while(t.parentNode&&(t=t.parentNode).nodeType===1&&!(v=t.getAttribute(S))){}if(v!==l){t=t.parentNode?t.nodeType===11?0:t.getAttribute(S)||0:0;if(!(u=U[l])){u=Q[l];u=P(u,U[t]||Q[t]);u.key=++N;U[N]=u}T&&w(l)}s.removeAttribute(S)}else{if(T&&(u=V.data(s,"tmplItem"))){w(u.key);U[u.key]=u;t=V.data(s.parentNode,"tmplItem");t=t?t.key:0}}if(u){n=u;while(n&&n.key!=t){n.nodes.push(s);n=n.parent}delete u._ctnt;delete u._wrap;V.data(s,"tmplItem",u)}function w(e){e=e+c;u=f[e]=f[e]||P(u,U[u.parent.key+c]||u.parent)}}}function B(f,g,h,e){if(!f){return K.pop()}K.push({_:f,tmpl:g,item:this,data:h,options:e})}function z(e,f,a){return V.tmpl(V.template(e),f,a,this)}function y(a,e){var f=a.options||{};f.wrapped=e;return V.tmpl(V.template(a.tmpl),a.data,f,a.item)}function A(e,f){var a=this._wrap;return V.map(V(V.isArray(a)?a.join(""):a).filter(e||"*"),function(b){return f?b.innerText||b.textContent:b.outerHTML||D(b)})}function C(){var a=this.nodes;V.tmpl(null,null,null,this).insertBefore(a[0]);V(a).remove()}})(jQuery);
/*!
 * Copyright (c) 2011 Coupons Incorporated. All Rights Reserved.
 */
var APP_COUPONSINC={fbAppId:"2412324777",contextData:{pid:"13306",nid:"10",zid:"iq37",bid:"",plid:"",crid:"",mod:"",CouponClubEnabled:1,User:{IsLoggedIn:0,CouponClubMember:{Status:0}}},getTinyURL:function(d,c){var b="http://json-tinyurl.appspot.com/?url=",a=b+encodeURIComponent(d)+"&callback=?";$.getJSON(a,function(e){c&&c(e.tinyurl)})}};var Hogan={};(function(j,h){j.Template=function(o,p,n,m){this.r=o||this.r;this.c=n;this.options=m;this.text=p||"";this.buf=(h)?[]:""};j.Template.prototype={r:function(o,n,m){return""},v:c,t:e,render:function b(o,n,m){return this.ri([o],n||{},m)},ri:function(o,n,m){return this.r(o,n,m)},rp:function(o,q,p,m){var n=p[o];if(!n){return""}if(this.c&&typeof n=="string"){n=this.c.compile(n,this.options)}return n.ri(q,p,m)},rs:function(p,o,q){var m=p[p.length-1];if(!g(m)){q(p,o,this);return}for(var n=0;n<m.length;n++){p.push(m[n]);q(p,o,this);p.pop()}},s:function(s,n,q,o,t,m,p){var r;if(g(s)&&s.length===0){return false}if(typeof s=="function"){s=this.ls(s,n,q,o,t,m,p)}r=(s==="")||!!s;if(!o&&r&&n){n.push((typeof s=="object")?s:n[n.length-1])}return r},d:function(q,n,p,r){var s=q.split("."),t=this.f(s[0],n,p,r),m=null;if(q==="."&&g(n[n.length-2])){return n[n.length-1]}for(var o=1;o<s.length;o++){if(t&&typeof t=="object"&&s[o] in t){m=t;t=t[s[o]]}else{t=""}}if(r&&!t){return false}if(!r&&typeof t=="function"){n.push(m);t=this.lv(t,n,p);n.pop()}return t},f:function(q,m,p,r){var t=false,n=null,s=false;for(var o=m.length-1;o>=0;o--){n=m[o];if(n&&typeof n=="object"&&q in n){t=n[q];s=true;break}}if(!s){return(r)?false:""}if(!r&&typeof t=="function"){t=this.lv(t,m,p)}return t},ho:function(s,m,p,r,o){var q=this.c;var n=this.options;n.delimiters=o;var r=s.call(m,r);r=(r==null)?String(r):r.toString();this.b(q.compile(r,n).render(m,p));return false},b:(h)?function(m){this.buf.push(m)}:function(m){this.buf+=m},fl:(h)?function(){var m=this.buf.join("");this.buf=[];return m}:function(){var m=this.buf;this.buf="";return m},ls:function(n,u,r,o,m,p,v){var q=u[u.length-1],s=null;if(!o&&this.c&&n.length>0){return this.ho(n,q,r,this.text.substring(m,p),v)}s=n.call(q);if(typeof s=="function"){if(o){return true}else{if(this.c){return this.ho(s,q,r,this.text.substring(m,p),v)}}}return s},lv:function(q,o,p){var n=o[o.length-1];var m=q.call(n);if(typeof m=="function"){m=e(m.call(n));if(this.c&&~m.indexOf("{\u007B")){return this.c.compile(m,this.options).render(n,p)}}return e(m)}};var i=/&/g,d=/</g,a=/>/g,l=/\'/g,k=/\"/g,f=/[&<>\"\']/;function e(m){return String((m===null||m===undefined)?"":m)}function c(m){m=e(m);return f.test(m)?m.replace(i,"&amp;").replace(d,"&lt;").replace(a,"&gt;").replace(l,"&#39;").replace(k,"&quot;"):m}var g=Array.isArray||function(m){return Object.prototype.toString.call(m)==="[object Array]"}})(typeof exports!=="undefined"?exports:Hogan);(function(n){var f=/\S/,j=/\"/g,o=/\n/g,k=/\r/g,u=/\\/g,a={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};n.scan=function m(G,B){var O=G.length,y=0,D=1,x=2,z=y,C=null,Q=null,P="",J=[],F=false,N=0,K=0,H="{{",M="}}";function L(){if(P.length>0){J.push(new String(P));P=""}}function A(){var S=true;for(var R=K;R<J.length;R++){S=(J[R].tag&&a[J[R].tag]<a._v)||(!J[R].tag&&J[R].match(f)===null);if(!S){return false}}return S}function I(U,R){L();if(U&&A()){for(var S=K,T;S<J.length;S++){if(!J[S].tag){if((T=J[S+1])&&T.tag==">"){T.indent=J[S].toString()}J.splice(S,1)}}}else{if(!R){J.push({tag:"\n"})}}F=false;K=J.length}function E(V,S){var U="="+M,R=V.indexOf(U,S),T=q(V.substring(V.indexOf("=",S)+1,R)).split(" ");H=T[0];M=T[1];return R+U.length-1}if(B){B=B.split(" ");H=B[0];M=B[1]}for(N=0;N<O;N++){if(z==y){if(w(H,G,N)){--N;L();z=D}else{if(G.charAt(N)=="\n"){I(F)}else{P+=G.charAt(N)}}}else{if(z==D){N+=H.length-1;Q=a[G.charAt(N+1)];C=Q?G.charAt(N+1):"_v";if(C=="="){N=E(G,N);z=y}else{if(Q){N++}z=x}F=N}else{if(w(M,G,N)){J.push({tag:C,n:q(P),otag:H,ctag:M,i:(C=="/")?F-M.length:N+H.length});P="";N+=M.length-1;z=y;if(C=="{"){if(M=="}}"){N++}else{r(J[J.length-1])}}}else{P+=G.charAt(N)}}}}I(F,true);return J};function r(x){if(x.n.substr(x.n.length-1)==="}"){x.n=x.n.substring(0,x.n.length-1)}}function q(x){if(x.trim){return x.trim()}return x.replace(/^\s*|\s*$/g,"")}function w(x,B,z){if(B.charAt(z)!=x.charAt(0)){return false}for(var A=1,y=x.length;A<y;A++){if(B.charAt(z+A)!=x.charAt(A)){return false}}return true}function b(D,A,y,C){var x=[],B=null,z=null;while(D.length>0){z=D.shift();if(z.tag=="#"||z.tag=="^"||e(z,C)){y.push(z);z.nodes=b(D,z.tag,y,C);x.push(z)}else{if(z.tag=="/"){if(y.length===0){throw new Error("Closing tag without opener: /"+z.n)}B=y.pop();if(z.n!=B.n&&!g(z.n,B.n,C)){throw new Error("Nesting error: "+B.n+" vs. "+z.n)}B.end=z.i;return x}else{x.push(z)}}}if(y.length>0){throw new Error("missing closing tag: "+y.pop().n)}return x}function e(A,y){for(var z=0,x=y.length;z<x;z++){if(y[z].o==A.n){A.tag="#";return true}}}function g(B,z,y){for(var A=0,x=y.length;A<x;A++){if(y[A].c==B&&y[A].o==z){return true}}}n.generate=function(x,A,y){var z='var _=this;_.b(i=i||"");'+t(x)+"return _.fl();";if(y.asString){return"function(c,p,i){"+z+";}"}return new n.Template(new Function("c","p","i",z),A,n,y)};function v(x){return x.replace(u,"\\\\").replace(j,'\\"').replace(o,"\\n").replace(k,"\\r")}function i(x){return(~x.indexOf("."))?"d":"f"}function t(y){var B="";for(var A=0,z=y.length;A<z;A++){var x=y[A].tag;if(x=="#"){B+=h(y[A].nodes,y[A].n,i(y[A].n),y[A].i,y[A].end,y[A].otag+" "+y[A].ctag)}else{if(x=="^"){B+=s(y[A].nodes,y[A].n,i(y[A].n))}else{if(x=="<"||x==">"){B+=d(y[A])}else{if(x=="{"||x=="&"){B+=c(y[A].n,i(y[A].n))}else{if(x=="\n"){B+=l('"\\n"'+(y.length-1==A?"":" + i"))}else{if(x=="_v"){B+=p(y[A].n,i(y[A].n))}else{if(x===undefined){B+=l('"'+v(y[A])+'"')}}}}}}}}return B}function h(y,C,B,A,x,z){return"if(_.s(_."+B+'("'+v(C)+'",c,p,1),c,p,0,'+A+","+x+',"'+z+'")){_.rs(c,p,function(c,p,_){'+t(y)+"});c.pop();}"}function s(x,z,y){return"if(!_.s(_."+y+'("'+v(z)+'",c,p,1),c,p,1,0,0,"")){'+t(x)+"};"}function d(x){return'_.b(_.rp("'+v(x.n)+'",c,p,"'+(x.indent||"")+'"));'}function c(y,x){return"_.b(_.t(_."+x+'("'+v(y)+'",c,p,0)));'}function p(y,x){return"_.b(_.v(_."+x+'("'+v(y)+'",c,p,0)));'}function l(x){return"_.b("+x+");"}n.parse=function(y,z,x){x=x||{};return b(y,"",[],x.sectionTags||[])},n.cache={};n.compile=function(A,x){x=x||{};var z=A+"||"+!!x.asString;var y=this.cache[z];if(y){return y}y=this.generate(this.parse(this.scan(A,x.delimiters),A,x),A,x);return this.cache[z]=y}})(typeof exports!=="undefined"?exports:Hogan);
/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(b){var q=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(u){return !u||/^\s*$/.test(u)},escapeRegExChars:function(u){return u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(u){return typeof u==="string"},isNumber:function(u){return typeof u==="number"},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(u){return typeof u==="undefined"},toStr:function t(u){return q.isUndefined(u)||u===null?"":u+""},bind:b.proxy,each:function(w,u){b.each(w,v);function v(x,y){return u(y,x)}},map:b.map,filter:b.grep,every:function(v,w){var u=true;if(!v){return u}b.each(v,function(x,y){if(!(u=w.call(null,y,x,v))){return false}});return !!u},some:function(v,w){var u=false;if(!v){return u}b.each(v,function(x,y){if(u=w.call(null,y,x,v)){return false}});return !!u},mixin:b.extend,getUniqueId:function(){var u=0;return function(){return u++}}(),templatify:function s(v){return b.isFunction(v)?v:u;function u(){return String(v)}},defer:function(u){setTimeout(u,0)},debounce:function(w,y,v){var x,u;return function(){var C=this,B=arguments,A,z;A=function(){x=null;if(!v){u=w.apply(C,B)}};z=v&&!x;clearTimeout(x);x=setTimeout(A,y);if(z){u=w.apply(C,B)}return u}},throttle:function(z,B){var x,w,A,u,y,v;y=0;v=function(){y=new Date();A=null;u=z.apply(x,w)};return function(){var C=new Date(),D=B-(C-y);x=this;w=arguments;if(D<=0){clearTimeout(A);A=null;y=C;u=z.apply(x,w)}else{if(!A){A=setTimeout(v,D)}}return u}},noop:function(){}}}();var l="0.10.5";var n=function(){return{nonword:s,whitespace:t,obj:{nonword:u(s),whitespace:u(t)}};function t(v){v=q.toStr(v);return v?v.split(/\s+/):[]}function s(v){v=q.toStr(v);return v?v.split(/\W+/):[]}function u(w){return function v(){var x=[].slice.call(arguments,0);return function y(A){var z=[];q.each(x,function(B){z=z.concat(w(q.toStr(A[B])))});return z}}}}();var d=function(){function t(A){this.maxSize=q.isNumber(A)?A:100;this.reset();if(this.maxSize<=0){this.set=this.get=b.noop}}q.mixin(t.prototype,{set:function z(A,D){var C=this.list.tail,B;if(this.size>=this.maxSize){this.list.remove(C);delete this.hash[C.key]}if(B=this.hash[A]){B.val=D;this.list.moveToFront(B)}else{B=new u(A,D);this.list.add(B);this.hash[A]=B;this.size++}},get:function v(A){var B=this.hash[A];if(B){this.list.moveToFront(B);return B.val}},reset:function x(){this.size=0;this.hash={};this.list=new w()}});function w(){this.head=this.tail=null}q.mixin(w.prototype,{add:function y(A){if(this.head){A.next=this.head;this.head.prev=A}this.head=A;this.tail=this.tail||A},remove:function s(A){A.prev?A.prev.next=A.next:this.head=A.next;A.next?A.next.prev=A.prev:this.tail=A.prev},moveToFront:function(A){this.remove(A);this.add(A)}});function u(A,B){this.key=A;this.val=B;this.prev=this.next=null}return t}();var o=function(){var s,t;try{s=window.localStorage;s.setItem("~~~","!");s.removeItem("~~~")}catch(x){s=null}function v(z){this.prefix=["__",z,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+q.escapeRegExChars(this.prefix))}if(s&&window.JSON){t={_prefix:function(z){return this.prefix+z},_ttlKey:function(z){return this._prefix(z)+this.ttlKey},get:function(z){if(this.isExpired(z)){this.remove(z)}return y(s.getItem(this._prefix(z)))},set:function(A,B,z){if(q.isNumber(z)){s.setItem(this._ttlKey(A),w(u()+z))}else{s.removeItem(this._ttlKey(A))}return s.setItem(this._prefix(A),w(B))},remove:function(z){s.removeItem(this._ttlKey(z));s.removeItem(this._prefix(z));return this},clear:function(){var B,A,C=[],z=s.length;for(B=0;B<z;B++){if((A=s.key(B)).match(this.keyMatcher)){C.push(A.replace(this.keyMatcher,""))}}for(B=C.length;B--;){this.remove(C[B])}return this},isExpired:function(A){var z=y(s.getItem(this._ttlKey(A)));return q.isNumber(z)&&u()>z?true:false}}}else{t={get:q.noop,set:q.noop,remove:q.noop,clear:q.noop,isExpired:q.noop}}q.mixin(v.prototype,t);return v;function u(){return new Date().getTime()}function w(z){return JSON.stringify(q.isUndefined(z)?null:z)}function y(z){return JSON.parse(z)}}();var p=function(){var u=0,w={},s=6,v=new d(10);function z(A){A=A||{};this.cancelled=false;this.lastUrl=null;this._send=A.transport?x(A.transport):b.ajax;this._get=A.rateLimiter?A.rateLimiter(this._get):this._get;this._cache=A.cache===false?new d(0):v}z.setMaxPendingRequests=function t(A){s=A};z.resetCache=function y(){v.reset()};q.mixin(z.prototype,{_get:function(E,H,B){var G=this,F;if(this.cancelled||E!==this.lastUrl){return}if(F=w[E]){F.done(D).fail(C)}else{if(u<s){u++;w[E]=this._send(E,H).done(D).fail(C).always(A)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function D(I){B&&B(null,I);G._cache.set(E,I)}function C(){B&&B(true)}function A(){u--;delete w[E];if(G.onDeckRequestArgs){G._get.apply(G,G.onDeckRequestArgs);G.onDeckRequestArgs=null}}},get:function(B,D,A){var C;if(q.isFunction(D)){A=D;D={}}this.cancelled=false;this.lastUrl=B;if(C=this._cache.get(B)){q.defer(function(){A&&A(null,C)})}else{this._get(B,D,A)}return !!C},cancel:function(){this.cancelled=true}});return z;function x(A){return function B(D,G){var C=b.Deferred();A(D,G,F,E);return C;function F(H){q.defer(function(){C.resolve(H)})}function E(H){q.defer(function(){C.reject(H)})}}}}();var i=function(){function s(B){B=B||{};if(!B.datumTokenizer||!B.queryTokenizer){b.error("datumTokenizer and queryTokenizer are both required")}this.datumTokenizer=B.datumTokenizer;this.queryTokenizer=B.queryTokenizer;this.reset()}q.mixin(s.prototype,{bootstrap:function u(B){this.datums=B.datums;this.trie=B.trie},add:function(C){var B=this;C=q.isArray(C)?C:[C];q.each(C,function(D){var F,E;F=B.datums.push(D)-1;E=w(B.datumTokenizer(D));q.each(E,function(G){var J,I,H;J=B.trie;I=G.split("");while(H=I.shift()){J=J.children[H]||(J.children[H]=z());J.ids.push(F)}})})},get:function t(D){var B=this,E,C;E=w(this.queryTokenizer(D));q.each(E,function(F){var J,I,H,G;if(C&&C.length===0){return false}J=B.trie;I=F.split("");while(J&&(H=I.shift())){J=J.children[H]}if(J&&I.length===0){G=J.ids.slice(0);C=C?x(C,G):G}else{C=[];return false}});return C?q.map(v(C),function(F){return B.datums[F]}):[]},reset:function y(){this.datums=[];this.trie=z()},serialize:function A(){return{datums:this.datums,trie:this.trie}}});return s;function w(B){B=q.filter(B,function(C){return !!C});B=q.map(B,function(C){return C.toLowerCase()});return B}function z(){return{ids:[],children:{}}}function v(F){var C={},E=[];for(var D=0,B=F.length;D<B;D++){if(!C[F[D]]){C[F[D]]=true;E.push(F[D])}}return E}function x(G,E){var C=0,F=0,I=[];G=G.sort(H);E=E.sort(H);var D=G.length,B=E.length;while(C<D&&F<B){if(G[C]<E[F]){C++}else{if(G[C]>E[F]){F++}else{I.push(G[C]);C++;F++}}}return I;function H(K,J){return K-J}}}();var f=function(){return{local:u,prefetch:s,remote:t};function u(v){return v.local||null}function s(x){var w,v;v={url:null,thumbprint:"",ttl:24*60*60*1000,filter:null,ajax:{}};if(w=x.prefetch||null){w=q.isString(w)?{url:w}:w;w=q.mixin(v,w);w.thumbprint=l+w.thumbprint;w.ajax.type=w.ajax.type||"GET";w.ajax.dataType=w.ajax.dataType||"json";!w.url&&b.error("prefetch requires url to be set")}return w}function t(z){var x,y;y={url:null,cache:true,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(x=z.remote||null){x=q.isString(x)?{url:x}:x;x=q.mixin(y,x);x.rateLimiter=/^throttle$/i.test(x.rateLimitBy)?w(x.rateLimitWait):v(x.rateLimitWait);x.ajax.type=x.ajax.type||"GET";x.ajax.dataType=x.ajax.dataType||"json";delete x.rateLimitBy;delete x.rateLimitWait;!x.url&&b.error("remote requires url to be set")}return x;function v(A){return function(B){return q.debounce(B,A)}}function w(A){return function(B){return q.throttle(B,A)}}}}();(function(D){var s,y;s=D.Bloodhound;y={data:"data",protocol:"protocol",thumbprint:"thumbprint"};D.Bloodhound=u;function u(L){if(!L||!L.local&&!L.prefetch&&!L.remote){b.error("one of local, prefetch, or remote is required")}this.limit=L.limit||5;this.sorter=B(L.sorter);this.dupDetector=L.dupDetector||A;this.local=f.local(L);this.prefetch=f.prefetch(L);this.remote=f.remote(L);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new i({datumTokenizer:L.datumTokenizer,queryTokenizer:L.queryTokenizer});this.storage=this.cacheKey?new o(this.cacheKey):null}u.noConflict=function K(){D.Bloodhound=s;return u};u.tokenizers=n;q.mixin(u.prototype,{_loadPrefetch:function v(P){var M=this,O,L;if(O=this._readFromStorage(P.thumbprint)){this.index.bootstrap(O);L=b.Deferred().resolve()}else{L=b.ajax(P.url,P.ajax).done(N)}return L;function N(Q){M.clear();M.add(P.filter?P.filter(Q):Q);M._saveToStorage(M.index.serialize(),P.thumbprint,P.ttl)}},_getFromRemote:function x(Q,L){var P=this,N,O;if(!this.transport){return}Q=Q||"";O=encodeURIComponent(Q);N=this.remote.replace?this.remote.replace(this.remote.url,Q):this.remote.url.replace(this.remote.wildcard,O);return this.transport.get(N,this.remote.ajax,M);function M(R,S){R?L([]):L(P.remote.filter?P.remote.filter(S):S)}},_cancelLastRemoteRequest:function J(){this.transport&&this.transport.cancel()},_saveToStorage:function E(N,M,L){if(this.storage){this.storage.set(y.data,N,L);this.storage.set(y.protocol,location.protocol,L);this.storage.set(y.thumbprint,M,L)}},_readFromStorage:function I(M){var L={},N;if(this.storage){L.data=this.storage.get(y.data);L.protocol=this.storage.get(y.protocol);L.thumbprint=this.storage.get(y.thumbprint)}N=L.thumbprint!==M||L.protocol!==location.protocol;return L.data&&!N?L.data:null},_initialize:function t(){var O=this,N=this.local,L;L=this.prefetch?this._loadPrefetch(this.prefetch):b.Deferred().resolve();N&&L.done(M);this.transport=this.remote?new p(this.remote):null;return this.initPromise=L.promise();function M(){O.add(q.isFunction(N)?N():N)}},initialize:function t(L){return !this.initPromise||L?this._initialize():this.initPromise},add:function z(L){this.index.add(L)},get:function G(P,L){var N=this,O=[],M=false;O=this.index.get(P);O=this.sorter(O).slice(0,this.limit);O.length<this.limit?M=this._getFromRemote(P,Q):this._cancelLastRemoteRequest();if(!M){(O.length>0||!this.transport)&&L&&L(O)}function Q(S){var R=O.slice(0);q.each(S,function(U){var T;T=q.some(R,function(V){return N.dupDetector(U,V)});!T&&R.push(U);return R.length<N.limit});L&&L(N.sorter(R))}},clear:function C(){this.index.reset()},clearPrefetchCache:function w(){this.storage&&this.storage.clear()},clearRemoteCache:function F(){this.transport&&p.resetCache()},ttAdapter:function H(){return q.bind(this.get,this)}});return u;function B(M){return q.isFunction(M)?L:N;function L(O){return O.sort(M)}function N(O){return O}}function A(){return false}})(this);var h=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}();var g=function(){var s={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(q.isMsie()){q.mixin(s.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(q.isMsie()&&q.isMsie()<=7){q.mixin(s.input,{marginTop:"-1px"})}return s}();var a=function(){var t="typeahead:";function s(u){if(!u||!u.el){b.error("EventBus initialized without el")}this.$el=b(u.el)}q.mixin(s.prototype,{trigger:function(v){var u=[].slice.call(arguments,1);this.$el.trigger(t+v,u)}});return s}();var e=function(){var u=/\s+/,y=s();return{onSync:z,onAsync:t,off:v,trigger:w};function A(G,E,C,D){var F;if(!C){return this}E=E.split(u);C=D?B(C,D):C;this._callbacks=this._callbacks||{};while(F=E.shift()){this._callbacks[F]=this._callbacks[F]||{sync:[],async:[]};this._callbacks[F][G].push(C)}return this}function t(E,C,D){return A.call(this,"async",E,C,D)}function z(E,C,D){return A.call(this,"sync",E,C,D)}function v(C){var D;if(!this._callbacks){return this}C=C.split(u);while(D=C.shift()){delete this._callbacks[D]}return this}function w(D){var E,F,C,G,H;if(!this._callbacks){return this}D=D.split(u);C=[].slice.call(arguments,1);while((E=D.shift())&&(F=this._callbacks[E])){G=x(F.sync,this,[E].concat(C));H=x(F.async,this,[E].concat(C));G()&&y(H)}return this}function x(F,E,D){return C;function C(){var I;for(var H=0,G=F.length;!I&&H<G;H+=1){I=F[H].apply(E,D)===false}return !I}}function s(){var D;if(window.setImmediate){D=function E(F){setImmediate(function(){F()})}}else{D=function C(F){setTimeout(function(){F()},0)}}return D}function B(D,C){return D.bind?D.bind(C):function(){D.apply(C,[].slice.call(arguments,0))}}}();var c=function(v){var u={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function t(z){var w;z=q.mixin({},u,z);if(!z.node||!z.pattern){return}z.pattern=q.isArray(z.pattern)?z.pattern:[z.pattern];w=s(z.pattern,z.caseSensitive,z.wordsOnly);x(z.node,y);function y(D){var B="",A,C;if(D.data!="Search Term"){if(B=w.exec(D.data)){C=v.createElement(z.tagName);z.className&&(C.className=z.className);A=D.splitText(B.index);A.splitText(B[0].length);C.appendChild(A.cloneNode(true));D.parentNode.replaceChild(C,A)}}return !!B}function x(D,E){var B,C=3;for(var A=0;A<D.childNodes.length;A++){B=D.childNodes[A];if(B.nodeType===C&&A<D.childNodes.length){A+=E(B)?1:0}else{x(B,E)}}}};function s(z,x,C){var B=[],A;for(var y=0,w=z.length;y<w;y++){B.push(q.escapeRegExChars(z[y]))}A=C?"\\b("+B.join("|")+")\\b":"("+B.join("|")+")";return x?new RegExp(A):new RegExp(A,"i")}}(window.document);var k=function(){var O;O={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function L(X){var V=this,W,S,U,T;X=X||{};if(!X.input){b.error("input is missing")}W=q.bind(this._onBlur,this);S=q.bind(this._onFocus,this);U=q.bind(this._onKeydown,this);T=q.bind(this._onInput,this);this.$hint=b(X.hint);this.$input=b(X.input).on("blur.tt",W).on("focus.tt",S).on("keydown.tt",U);if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=q.noop}if(!q.isMsie()){this.$input.on("input.tt",T)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(Y){if(O[Y.which||Y.keyCode]){return}q.defer(q.bind(V._onInput,V,Y))})}this.query=this.$input.val();this.$overflowHelper=E(this.$input)}L.normalizeQuery=function(S){return(S||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};q.mixin(L.prototype,e,{_onBlur:function C(){this.resetInputValue();this.trigger("blurred")},_onFocus:function w(){this.trigger("focused")},_onKeydown:function Q(S){var T=O[S.which||S.keyCode];this._managePreventDefault(T,S);if(T&&this._shouldTrigger(T,S)){this.trigger(T+"Keyed",S)}},_onInput:function t(){this._checkInputValue()},_managePreventDefault:function y(W,V){var U,T,S;switch(W){case"tab":T=this.getHint();S=this.getInputValue();U=T&&T!==S&&!F(V);break;case"up":case"down":U=!F(V);break;default:U=false}U&&V.preventDefault()},_shouldTrigger:function R(U,T){var S;switch(U){case"tab":S=!F(T);break;default:S=true}return S},_checkInputValue:function z(){var S,T,U;S=this.getInputValue();T=B(S,this.query);U=T?this.query.length!==S.length:false;this.query=S;if(!T){this.trigger("queryChanged",this.query)}else{if(U){this.trigger("whitespaceChanged",this.query)}}},focus:function H(){this.$input.focus()},blur:function M(){this.$input.blur()},getQuery:function J(){return this.query},setQuery:function I(S){this.query=S},getInputValue:function x(){return this.$input.val()},setInputValue:function A(T,S){this.$input.val(T);S?this.clearHint():this._checkInputValue()},resetInputValue:function v(){this.setInputValue(this.query,true)},getHint:function u(){return this.$hint.val()},setHint:function N(S){this.$hint.val(S)},clearHint:function D(){this.setHint("")},clearHintIfInvalid:function s(){var V,U,S,T;V=this.getInputValue();U=this.getHint();S=V!==U&&U.indexOf(V)===0;T=V!==""&&S&&!this.hasOverflow();!T&&this.clearHint()},getLanguageDirection:function G(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function K(){var S=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=S},isCursorAtEnd:function(){var T,U,S;T=this.$input.val().length;U=this.$input[0].selectionStart;if(q.isNumber(U)){return U===T}else{if(document.selection){S=document.selection.createRange();S.moveStart("character",-T);return T===S.text.length}}return true},destroy:function P(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return L;function E(S){return b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:S.css("font-family"),fontSize:S.css("font-size"),fontStyle:S.css("font-style"),fontVariant:S.css("font-variant"),fontWeight:S.css("font-weight"),wordSpacing:S.css("word-spacing"),letterSpacing:S.css("letter-spacing"),textIndent:S.css("text-indent"),textRendering:S.css("text-rendering"),textTransform:S.css("text-transform")}).insertAfter(S)}function B(T,S){return L.normalizeQuery(T)===L.normalizeQuery(S)}function F(S){return S.altKey||S.ctrlKey||S.metaKey||S.shiftKey}}();var r=function(){var t="ttDataset",H="ttValue",B="ttDatum";function s(I){I=I||{};I.templates=I.templates||{};if(!I.source){b.error("missing source")}if(I.name&&!v(I.name)){b.error("invalid dataset name: "+I.name)}this.query=null;this.highlight=!!I.highlight;this.name=I.name||q.getUniqueId();this.source=I.source;this.displayFn=w(I.display||I.displayKey);this.templates=x(I.templates,this.displayFn);this.$el=b(h.dataset.replace("%CLASS%",this.name))}s.extractDatasetName=function F(I){return b(I).data(t)};s.extractValue=function C(I){return b(I).data(H)};s.extractDatum=function C(I){return b(I).data(B)};q.mixin(s.prototype,e,{_render:function u(O,I){if(!this.$el){return}var N=this,K;this.$el.empty();K=I&&I.length;if(!K&&this.templates.empty){this.$el.html(J()).prepend(N.templates.header?M():null).append(N.templates.footer?L():null)}else{if(K){this.$el.html(P()).prepend(N.templates.header?M():null).append(N.templates.footer?L():null)}}this.trigger("rendered");function J(){return N.templates.empty({query:O,isEmpty:true})}function P(){var R,Q;R=b(h.suggestions).css(g.suggestions);Q=q.map(I,S);R.append.apply(R,Q);N.highlight&&c({className:"tt-highlight",node:R[0],pattern:O});return R;function S(T){var U;U=b(h.suggestion).append(N.templates.suggestion(T)).data(t,N.name).data(H,N.displayFn(T)).data(B,T);U.children().each(function(){b(this).css(g.suggestionChild)});return U}}function M(){return N.templates.header({query:O,isEmpty:!K})}function L(){return N.templates.footer({query:O,isEmpty:!K})}},getRoot:function D(){return this.$el},update:function y(K){var J=this;this.query=K;this.canceled=false;this.source(K,I);function I(L){if(!J.canceled&&K===J.query){J._render(K,L)}}},cancel:function G(){this.canceled=true},clear:function A(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function z(){return this.$el.is(":empty")},destroy:function E(){this.$el=null}});return s;function w(I){I=I||"value";return q.isFunction(I)?I:J;function J(K){return K[I]}}function x(J,K){return{empty:J.empty&&q.templatify(J.empty),header:J.header&&q.templatify(J.header),footer:J.footer&&q.templatify(J.footer),suggestion:J.suggestion||I};function I(L){return"<p>"+K(L)+"</p>"}}function v(I){return/^[_a-zA-Z0-9-]+$/.test(I)}}();var m=function(){function L(U){var S=this,Q,T,R;U=U||{};if(!U.menu){b.error("menu is required")}this.isOpen=false;this.isEmpty=true;this.datasets=q.map(U.datasets,C);Q=q.bind(this._onSuggestionClick,this);T=q.bind(this._onSuggestionMouseEnter,this);R=q.bind(this._onSuggestionMouseLeave,this);this.$menu=b(U.menu).on("click.tt",".tt-suggestion",Q).on("mouseenter.tt",".tt-suggestion",T).on("mouseleave.tt",".tt-suggestion",R);q.each(this.datasets,function(V){S.$menu.append(V.getRoot());V.onSync("rendered",S._onRendered,S)})}q.mixin(L.prototype,e,{_onSuggestionClick:function K(Q){this.trigger("suggestionClicked",b(Q.currentTarget))},_onSuggestionMouseEnter:function s(Q){this._removeCursor();this._setCursor(b(Q.currentTarget),true)},_onSuggestionMouseLeave:function F(){this._removeCursor()},_onRendered:function y(){this.isEmpty=q.every(this.datasets,Q);this.isEmpty?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered");function Q(R){return R.isEmpty()}},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function x(){return this.$menu.find(".tt-suggestion")},_getCursor:function v(){return this.$menu.find(".tt-cursor").first()},_setCursor:function N(R,Q){R.first().addClass("tt-cursor");!Q&&this.trigger("cursorMoved")},_removeCursor:function u(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function t(Q){var S,R,U,T;if(!this.isOpen){return}R=this._getCursor();S=this._getSuggestions();this._removeCursor();U=S.index(R)+Q;U=(U+1)%(S.length+1)-1;if(U===-1){this.trigger("cursorRemoved");return}else{if(U<-1){U=S.length-1}}this._setCursor(T=S.eq(U));this._ensureVisible(T)},_ensureVisible:function J(T){var Q,S,R,U;Q=T.position().top;S=Q+T.outerHeight(true);R=this.$menu.scrollTop();U=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);if(Q<0){this.$menu.scrollTop(R+Q)}else{if(U<S){this.$menu.scrollTop(R+(S-U))}}},close:function G(){if(this.isOpen){this.isOpen=false;this._removeCursor();this._hide();this.trigger("closed")}},open:function E(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function O(Q){this.$menu.css(Q==="ltr"?g.ltr:g.rtl)},moveCursorUp:function z(){this._moveCursor(-1)},moveCursorDown:function P(){this._moveCursor(+1)},getDatumForSuggestion:function B(R){var Q=null;if(R.length){Q={raw:r.extractDatum(R),value:r.extractValue(R),datasetName:r.extractDatasetName(R)}}return Q},getDatumForCursor:function w(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function I(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function A(Q){q.each(this.datasets,R);function R(S){S.update(Q)}},empty:function D(){q.each(this.datasets,Q);this.isEmpty=true;function Q(R){R.clear()}},isVisible:function H(){return this.isOpen&&!this.isEmpty},destroy:function M(){this.$menu.off(".tt");this.$menu=null;q.each(this.datasets,Q);function Q(R){R.destroy()}}});return L;function C(Q){return new r(Q)}}();var j=function(){var T="ttAttrs";function D(Z){var Y,aa,X;Z=Z||{};if(!Z.input){b.error("missing input")}this.isActivated=false;this.autoselect=!!Z.autoselect;this.minLength=q.isNumber(Z.minLength)?Z.minLength:1;this.$node=N(Z.input,Z.withHint);Y=this.$node.find(".tt-dropdown-menu");aa=this.$node.find(".tt-input");X=this.$node.find(".tt-hint");aa.on("blur.tt",function(ac){var ae,ad,ab;ae=document.activeElement;ad=Y.is(ae);ab=Y.has(ae).length>0;if(q.isMsie()&&(ad||ab)){ac.preventDefault();ac.stopImmediatePropagation();q.defer(function(){aa.focus()})}});Y.on("mousedown.tt",function(ab){ab.preventDefault()});this.eventBus=Z.eventBus||new a({el:aa});this.dropdown=new m({menu:Y,datasets:Z.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=new k({input:aa,hint:X}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}q.mixin(D.prototype,{_onSuggestionClicked:function u(Z,Y){var X;if(X=this.dropdown.getDatumForSuggestion(Y)){this._select(X)}},_onCursorMoved:function O(){var X=this.dropdown.getDatumForCursor();this.input.setInputValue(X.value,true);this.eventBus.trigger("cursorchanged",X.raw,X.datasetName)},_onCursorRemoved:function x(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function J(){this._updateHint()},_onOpened:function v(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function A(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function L(){this.isActivated=true;this.dropdown.open()},_onBlurred:function M(){this.isActivated=false;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function H(Y,X){var Z,aa;Z=this.dropdown.getDatumForCursor();aa=this.dropdown.getDatumForTopSuggestion();if(Z){}else{if(this.autoselect&&aa){this._select(aa);X.preventDefault()}}},_onTabKeyed:function W(Z,Y){var X;if(X=this.dropdown.getDatumForCursor()){this._select(X);Y.preventDefault()}else{this._autocomplete(true)}},_onEscKeyed:function R(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function t(){var X=this.input.getQuery();this.dropdown.isEmpty&&X.length>=this.minLength?this.dropdown.update(X):this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function y(){var X=this.input.getQuery();this.dropdown.isEmpty&&X.length>=this.minLength?this.dropdown.update(X):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function V(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function I(){this.dir==="ltr"&&this._autocomplete()},_onQueryChanged:function F(Y,X){this.input.clearHintIfInvalid();X.length>=this.minLength?this.dropdown.update(X):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function S(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function Q(){var X;if(this.dir!==(X=this.input.getLanguageDirection())){this.dir=X;this.$node.css("direction",X);this.dropdown.setLanguageDirection(X)}},_updateHint:function K(){var Y,ac,ab,aa,X,Z;Y=this.dropdown.getDatumForTopSuggestion();if(Y&&this.dropdown.isVisible()&&!this.input.hasOverflow()){ac=this.input.getInputValue();ab=k.normalizeQuery(ac);aa=q.escapeRegExChars(ab);X=new RegExp("^(?:"+aa+")(.+$)","i");Z=X.exec(Y.value);Z?this.input.setHint(ac+Z[1]):this.input.clearHint()}else{this.input.clearHint()}b(".tt-dataset-stores .tt-suggestion").first().addClass("tt-cursor")},_autocomplete:function U(Z){var ab,aa,X,Y;ab=this.input.getHint();aa=this.input.getQuery();X=Z||this.input.isCursorAtEnd();if(ab&&aa!==ab&&X){Y=this.dropdown.getDatumForTopSuggestion();Y&&this.input.setInputValue(Y.value);this.eventBus.trigger("autocompleted",Y.raw,Y.datasetName)}},_select:function G(X){this.input.setQuery(X.value);this.input.setInputValue(X.value,true);this._setLanguageDirection();this.eventBus.trigger("selected",X.raw,X.datasetName);this.dropdown.close();q.defer(q.bind(this.dropdown.empty,this.dropdown))},open:function C(){this.dropdown.open()},close:function E(){this.dropdown.close()},setVal:function s(X){X=q.toStr(X);if(this.isActivated){this.input.setInputValue(X)}else{this.input.setQuery(X);this.input.setInputValue(X,true)}this._setLanguageDirection()},getVal:function B(){return this.input.getQuery()},destroy:function P(){this.input.destroy();this.dropdown.destroy();w(this.$node);this.$node=null}});return D;function N(X,ac){var ad,Z,ab,Y;ad=b(X);Z=b(h.wrapper).css(g.wrapper);ab=b(h.dropdown).css(g.dropdown);Y=ad.clone().css(g.hint).css(z(ad));Y.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",true).attr({autocomplete:"off",spellcheck:"false",tabindex:-1});ad.data(T,{dir:ad.attr("dir"),autocomplete:ad.attr("autocomplete"),spellcheck:ad.attr("spellcheck"),style:ad.attr("style")});ad.addClass("tt-input").attr({autocomplete:"off",spellcheck:false}).css(ac?g.input:g.inputWithNoHint);try{!ad.attr("dir")&&ad.attr("dir","auto")}catch(aa){}return ad.wrap(Z).parent().prepend(ac?Y:null).append(ab)}function z(X){return{backgroundAttachment:X.css("background-attachment"),backgroundClip:X.css("background-clip"),backgroundColor:X.css("background-color"),backgroundImage:X.css("background-image"),backgroundOrigin:X.css("background-origin"),backgroundPosition:X.css("background-position"),backgroundRepeat:X.css("background-repeat"),backgroundSize:X.css("background-size")}}function w(X){var Y=X.find(".tt-input");q.each(Y.data(T),function(aa,Z){q.isUndefined(aa)?Y.removeAttr(Z):Y.attr(Z,aa)});Y.detach().removeData(T).removeClass("tt-input").insertAfter(X);X.remove()}}();(function(){var u,s,v;u=b.fn.typeahead;s="ttTypeahead";v={initialize:function w(D,C){C=q.isArray(C)?C:[].slice.call(arguments,1);D=D||{};return this.each(B);function B(){var G=b(this),E,F;q.each(C,function(H){H.highlight=!!D.highlight});F=new j({input:G,eventBus:E=new a({el:G}),withHint:q.isUndefined(D.hint)?true:!!D.hint,minLength:D.minLength,autoselect:D.autoselect,datasets:C});G.data(s,F)}},open:function x(){return this.each(B);function B(){var D=b(this),C;if(C=D.data(s)){C.open()}}},close:function A(){return this.each(B);function B(){var D=b(this),C;if(C=D.data(s)){C.close()}}},val:function t(B){return !arguments.length?D(this.first()):this.each(C);function C(){var F=b(this),E;if(E=F.data(s)){E.setVal(B)}}function D(G){var F,E;if(F=G.data(s)){E=F.getVal()}return E}},destroy:function z(){return this.each(B);function B(){var D=b(this),C;if(C=D.data(s)){C.destroy();D.removeData(s)}}}};b.fn.typeahead=function(C){var B;if(v[C]&&C!=="initialize"){B=this.filter(function(){return !!b(this).data(s)});return v[C].apply(B,[].slice.call(arguments,1))}else{return v.initialize.apply(this,arguments)}};b.fn.typeahead.noConflict=function y(){b.fn.typeahead=u;return this}})()})(window.jQuery||window.Zepto||window.$);APP_COUPONSINC.search=(function(h){if(typeof console=="undefined"){this.console={log:function(){},info:function(){},error:function(){},warn:function(){}}}var m;var k=h(".mod-search");var b=new Object();function i(p,n,r){var s=p,o=h("#queryterm").attr("placeholder");if(s!=null&&s!=undefined){if(s.replace(/\s/g,"")==""||s==o){}else{var q="";if(n!=null&&n!=""&&n!=undefined){q="?"+n+"&ids="+r+"&queryterm="+encodeURIComponent(p)}else{q="?ids="+r+"&queryterm="+encodeURIComponent(p)}window.location.href="/coupon-codes/search/"+q;h("#queryterm").blur()}}event.preventDefault()}function j(n){var o=h(n.target);if(o.hasClass("sign-search")||o.hasClass("fa-search")){n.preventDefault();i(b.searchValue,b.querystring,b.ids)}else{}}function a(){var s=h("#timestamp").val();var q=h("#signature").val();var o="/cc/v1/search/merchants/dummy?timestamp="+s+"&sig="+q+"&source=cc&query=%QUERY";var n=h(".querystring").text();var r;var t=this;var p=new Bloodhound({datumTokenizer:function(u){return Bloodhound.tokenizers.whitespace(u.Name)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:6,remote:{url:o,filter:function(u){return h.map(u,h.proxy(function(y){var w=y.docs;var v=w.filter(function(z){return z.RetailerID});t.ids=w.reduce(function(z,A){return(z+A.RetailerID+",")},"");t.ids=t.ids.substr(0,t.ids.length-1);var x={MerchantImgUrlLg:"",Name:h("#queryterm").val(),NormalizedName:"0"};if(w.length==0||(w.length>0&&w[w.length-1].NormalizedName!=undefined&&w[w.length-1].NormalizedName!="0")){w.push(x)}b.searchValue=x.Name;b.querystring=n;b.ids=t.ids;return w}),t)}}});p.initialize();h("#queryterm").typeahead({hint:true,highlight:true,minLength:0,},{name:"stores",displayKey:"Name",source:p.ttAdapter(),templates:{empty:['<div class="empty-message">',"no results found","</div>"].join("\n"),suggestion:function(u){if(n!=null&&n!=""&&n!=undefined){r='<li><a href="/coupon-codes/'+u.NormalizedName+"/?"+n+'"><span class="keywordWrap"><span class="displayKey">'+u.Name+'</span></span><span class="imgWrap"><img src="'+u.MerchantImgUrlSm+'"></span></a></li>'}else{r='<li><a href="/coupon-codes/'+u.NormalizedName+'/"><span class="keywordWrap"><span class="displayKey">'+u.Name+'</span></span><span class="imgWrap"><img src="'+u.MerchantImgUrlSm+'"></span></a></li>'}if(u.NormalizedName=="0"){r='<li class="searchterm-click"><a href="/coupon-codes/search/" onClick="return false"><span class="search-value">'+u.Name+'</span><span class="search-term">Search Term</span></a></li>'}return r}},engine:Hogan}).bind("typeahead:selected",h.proxy(function(w,u,v){if(u.NormalizedName=="0"){i(u.Name,n,t.ids)}},t)).bind("typeahead:datasetRendered",function(u){h(".tt-dataset-stores .tt-suggestion").first().addClass("tt-cursor")})}function d(){var r=h("#timestamp").val();var q=h("#signature").val();var o="/cc/v1/search/merchants/dummy?timestamp="+r+"&sig="+q+"&source=cc&query=";var n=h(".querystring").text();var p={limit:0,datasource:"remote",data:o,templates:{suggestion:function(s){if(n!=null&&n!=""&&n!=undefined){templateString='<li><a href="/coupon-codes/'+s.NormalizedName+"/?"+n+'"><div class="optionValue">'+s.Name+'</div>  <span class="optionImg"><img width="70" src="'+s.MerchantImgUrlSm+'"></span></a></li>'}else{templateString='<li><a href="/coupon-codes/'+s.NormalizedName+'/"><div class="optionValue">'+s.Name+'</div>  <span class="optionImg"><img width="70" src="'+s.MerchantImgUrlSm+'"></span></a></li>'}if(s.NormalizedName=="0"){templateString='<li class="searchterm-click"><a href="/coupon-codes/search/"><div class="search-footer"><span class="search-value">'+s.Name+'</span> \t <span class="search-term">Search Term</span></div></a></li>'}return templateString}}};h.fn.autocomplete(p)}function e(n){n.stopPropagation();var o=h(n.target);if(o.hasClass("fa.fa-search")){h(".spaceholder").hide();h(".spaceholder2").show();h(".header-search").removeClass("fa.fa-search");h(".header-search").addClass("header-cancel-search");h(".header-search").text("Cancel");h(".header-search-box").show()}else{if(o.hasClass("header-cancel-search")){h(".header-search").removeClass("header-cancel-search");h(".header-search").text("");h(".header-search").addClass("fa fa-search");h(".header-search-box").hide();h(".spaceholder").show();h(".spaceholder2").hide()}}}function l(){m=h("#modelAttrIsSmallMobile").val();isIphoneIpod=h("#modelAttrIsIphoneIpod").val();k.bind("click",j);h(".header-search").bind("click",e);if(m==""||m==undefined||m==null||m=="false"){a()}else{d()}if(m==""||m==undefined||m==null||m=="false"){h("#queryterm").keypress(function(p){if(p.which===13){var o=h(".tt-suggestion.tt-cursor li a").attr("href");if(o!=undefined&&o!="/coupon-codes/search/"){window.location=h(".tt-suggestion.tt-cursor li a").attr("href")}else{i(b.searchValue,b.querystring,b.ids)}}})}var n="/cc/merchant.json?tg=s_c&mt=0";h.ajax({type:"GET",url:n,dataType:"json"});h(".cc-new-home .home-sign-search").bind("click",f);h(".cc-new-home").bind("click",g)}function f(){h(".promo-container").hide();h(".search-container").removeClass("hidden");h(".search-container").find(".input-container").find("input").focus()}function g(o){var p=h(o.target);var n=p.parents(".search-container");if(p.hasClass("home-sign-search")){}else{if(n.length<1){h(".promo-container").show();h(".search-container").addClass("hidden")}}}function c(){}return{onReady:l}})(window.jQuery||window.Zepto||window.$);$(document).ready(function(){APP_COUPONSINC.search.onReady()});APP_COUPONSINC.floating_header=(function(e){function b(i){var h=e(i.target);h=h.hasClass("ccodes-type")?h:e(h.parents(".ccodes-type")[0]);if(h.hasClass("disabled")){return}if(e(".floating-header").hasClass("fixed")){e("html, body").animate({scrollTop:"80px"},800)}e(".ccodes-type").removeClass("active");h.addClass("active");if(h.hasClass("all")){e(".ccpod").removeClass("hidden");e(document).trigger("filterOffer",{type:"all"})}else{if(h.hasClass("codes")){e(".ccpod").addClass("hidden");e(".ccpod.codes").removeClass("hidden");e(document).trigger("filterOffer",{type:"codes"})}else{if(h.hasClass("sales")){e(".ccpod").addClass("hidden");e(".ccpod.sales").removeClass("hidden");e(document).trigger("filterOffer",{type:"sales"})}else{if(h.hasClass("free")){e(".ccpod").addClass("hidden");e(".ccpod.free").removeClass("hidden");e(document).trigger("filterOffer",{type:"free shipping"})}else{if(h.hasClass("printable")){e(".ccpod").addClass("hidden");e(".ccpod.printable").removeClass("hidden");e(document).trigger("filterOffer",{type:"print"})}else{if(h.hasClass("is-deal")){e(".ccpod").addClass("hidden");e(".ccpod.is-deal").removeClass("hidden")}else{if(h.hasClass("is-bogo")){e(".ccpod").addClass("hidden");e(".ccpod.is-bogo").removeClass("hidden")}else{if(h.hasClass("is-exclusives")){e(".ccpod").addClass("hidden");e(".ccpod.is-exclusive").removeClass("hidden")}else{if(h.hasClass("is-free_gifts")){e(".ccpod").addClass("hidden");e(".ccpod.is-freegift").removeClass("hidden")}else{if(h.hasClass("is-gift_cards")){e(".ccpod").addClass("hidden");e(".ccpod.is-giftcard").removeClass("hidden")}else{if(h.hasClass("is-rebates")){e(".ccpod").addClass("hidden");e(".ccpod.is-rebate").removeClass("hidden")}}}}}}}}}}}e(".expired-coupon").removeClass("hidden");e(".expired-coupon .ccpod").removeClass("hidden")}function g(i){var j=window.location.search;var h=(i.target);switch(h.id){case"fh-tab-home":window.location.href="https://www.coupons.com/"+j;break;case"fh-tab-coupons":window.location.href="https://www.coupons.com/coupons/"+j;break;case"fh-tab-coupon-codes":window.location.href="/coupon-codes/"+j;break;case"fh-tab-card-linked-offers":window.location.href="https://www.coupons.com/card-linked-offers/"+j;break;case"fh-tab-save-to-card":window.location.href="https://www.coupons.com/store-loyalty-card-coupons/"+j;break;case"fh-tab-local":window.location.href="https://www.coupons.com/local-offers/"+j;break;case"fh-tab-blog":window.location.href="http://www.coupons.com/thegoodstuff/"+j;break}}function c(i){var h=e(i.target);if(h.hasClass("disabled")||h.hasClass("active")){return}e(".coupon-type").removeClass("active");h.addClass("active");if(h.hasClass("all")){e(".ccpod").removeClass("hidden")}else{if(h.hasClass("codes")){e(".ccpod").addClass("hidden");e(".ccpod.codes").removeClass("hidden")}else{if(h.hasClass("sales")){e(".ccpod").addClass("hidden");e(".ccpod.sales").removeClass("hidden")}else{if(h.hasClass("printable")){e(".ccpod").addClass("hidden");e(".ccpod.printable").removeClass("hidden")}else{if(h.hasClass("deals")){e(".ccpod").addClass("hidden");e(".ccpod.is-deal").removeClass("hidden")}}}}}e(".expired-coupon .ccpod").removeClass("hidden")}function d(){e(".ccpod").addClass("hidden");e(".ccpod.printable").removeClass("hidden");e(".expired-coupon").addClass("hidden")}function a(h,n){if(n==null){return null}var k=null;var m=n.replace("?","").split("&");for(var j=0;j<m.length;j++){var l=m[j].split("=");if(l[0]==h){k=l[1]}}return k}function f(){e(".ccodes-type").bind("click",b);e(".js-navLink").bind("click",g);var i=window.location.search;var h=a("filter",i);if(h=="in-store"){d()}}return{onReady:f}})(jQuery);jQuery(document).ready(function(){APP_COUPONSINC.floating_header.onReady()});APP_COUPONSINC.layout_scroll=(function(e){var m=10;var d=e(window),q=e(".hero-container"),n=e(".floating-header"),r=e(".mod-search"),o=e(".unlocked-container"),i=e(".right-rail"),g=e(".floating-header").outerHeight(true),j=0,c=false;function f(){var u=d.scrollTop(),x=0,w=q.outerHeight(true);if(!n.hasClass("fixed")&&u>x+w){l("fixed")}if(n.hasClass("fixed")&&u<=x+w){l("static")}if(!r.hasClass("fixed")&&u>x+w){l("fixed")}if(r.hasClass("fixed")&&u<=x+w){l("static")}if(j>u){e(".deal-filter-container").show()}else{if(c==true&&u>x+w+55){e(".deal-filter-container").hide()}}j=u;var v=e(".deals_promo_container");var z=e(".show_on_right");if(v.length>0&&z.length<=0){e(".deals_promo_container").addClass("show_on_right");e(".deals_promo_container").animate({right:-1},500)}var A=e(".user_support_container");var t=e(".show_user_support_on_right");if(A.length>0&&t.length<=0){var y=e(".user_support_container.B");if(y.length>0){e(".user_support_container").addClass("show_user_support_on_right");e(".user_support_container").animate({right:-1},500)}else{categoriesTop=e(".mod-categories ").position().top;if(u>1000||(u>categoriesTop-window.innerHeight)){e(".user_support_container").addClass("show_user_support_on_right");e(".user_support_container").animate({right:-1},500)}}}}function l(t){if(t==="fixed"){c=true;n.addClass("fixed");r.addClass("fixed");o.css("margin-top",g);s({top:"1px"})}else{c=false;n.removeClass("fixed");r.removeClass("fixed");s({top:"-50px"});o.css("margin-top","0px")}}function s(t){window.setTimeout(function(){e(".logo-container a").css(t)},100)}function p(){d.scroll(f);e(".mod-signinsignuplinks.siso-links .menu").mouseenter(function(){e("#layer-top-on-hover").addClass("top-most")}).mouseleave(function(){e("#layer-top-on-hover").removeClass("top-most")});e(".mod-signinsignuplinks.menu").mouseenter(function(){e("#layer-top-on-hover").addClass("top-most")}).mouseleave(function(){e("#layer-top-on-hover").removeClass("top-most")})}function k(){e(".deals_promo_container").animate({right:-370},500)}function b(){e(".user_support_container").animate({right:-500},500)}function h(){e(".user_support_one").addClass("hidden");e(".user_support_two").removeClass("hidden")}function a(){e("body").scrollTop(0);i.css("margin-top","0px");p();e(".close_deals_promo").bind("click",k);e(".close_user_support").bind("click",b);e(".js_show_user_support_two").bind("click",h)}return{MAX_ROW_CHANGE:m,onReady:a}})(jQuery);jQuery(document).ready(function(){APP_COUPONSINC.layout_scroll.onReady()});APP_COUPONSINC.ccodesgallery=(function(l){var E;var i;var c;function f(I){if(I.attr("podid")!=null&&I.attr("podid")!=undefined){return I.attr("podid").substr(5)}else{if(I.attr("id")!=undefined){return I.attr("id").substr(5)}}return""}function C(I){return this.attr("id")}function F(J){var L=l(".ccpod");var K=0;for(var I=0;I<L.length;I++){if(l(L[I]).attr("podid")=="CCPOD"+J){K=I+1;break}}return K}function A(K,J){var L=F(J);if(K.parents(".carousel-hero").hasClass("btn-get-direct-code")||K.parents(".carousel-hero").hasClass("btn-get-indirect-code")||K.parents(".carousel-hero").hasClass("btn-get-printable-url")||K.parents(".carousel-hero").hasClass("btn-get-printable-image")){redirectUrl="https://www.coupons.com/coupon-codes/go/rs?k="+J;lightboxUrl=window.location.protocol+"//"+window.location.host+window.location.pathname+"?cid="+J}else{redirectUrl="https://www.coupons.com/coupon-codes/go/rs?k="+J+"&pos="+L;lightboxUrl=window.location.protocol+"//"+window.location.host+window.location.pathname+"?cid="+J+"&pos="+L}if(i){lightboxUrl+="&"+i;redirectUrl+="&"+i}var I=o("ccti",K.attr("data-ccti"));if(I==undefined){I=o("ccti",K.closest(".carousel-hero").attr("data-ccti"))}if(I==undefined){I=o("ccti",K.parents(".ccpod").find(".btn").attr("data-ccti"))}if(I==undefined){I=o("ccti",K.parents(".ccpod").attr("data-ccti"))}if(I){lightboxUrl+="&ccti="+I;redirectUrl+="&ccti="+I}return{lightboxUrl:lightboxUrl,redirectUrl:redirectUrl,ccti:I}}function s(K,L){var M=null;var J=L.parents(".ccpod");c=f(J);var I="/passbook/?cid="+c;l("#passbook_href").attr("href",I);if(J.attr("data-pass-coupon")!=null&&J.attr("data-pass-coupon")!=undefined){M=J.attr("data-pass-coupon")}if(l("#save-for-later-popup").length>0){l.modalPopup.open({target:"#save-for-later-popup",maxWidth:340})}K.stopPropagation()}l(".offer-action-button").on("click",function(I){var J=l(I);if(I.target&&I.target.innerHTML&&I.target.innerHTML.indexOf("Go To")>-1){if(l(".feedback#save-for-later-popup").length>0){l.modalPopup.open({target:".feedback#save-for-later-popup",maxWidth:340})}}});function p(I){var O=l(I);if(I.target){O=l(I.target)}var N=I.data;var M;if(N.from=="ccodesgallery"){var K=O.hasClass(".ccpod");if(O.hasClass(".ccpod")){M=O}else{M=O.parents(".ccpod")}}else{if(N.from=="referredemail"){M=O.closest(".btn")}else{if(N.from=="desc"){M=O}else{var M=O.parents(".carousel-hero")}}}var L=f(M);var R=A(O,L);var J=R.lightboxUrl;var Q=R.redirectUrl;var P=R.ccti;if(O.hasClass("clickable-summary")){J+="&lbox=2"}else{J+="&lbox=1"}if(O.hasClass("see-more")&&(O.closest(".carousel-hero").hasClass("coupon")||O.closest(".carousel-hero").hasClass("merchant"))){window.location.href="/coupon-codes/"+O.closest(".carousel-hero").children("#NormalizedName").val()+"/?"+i}else{if(O.closest(".carousel-hero").hasClass("merchant")){v(O.closest(".carousel-hero").children("#redirect_url").val()+"/?"+i)}else{if(O.closest(".carousel-hero").hasClass("seasonal")){window.location.href="/"+O.closest(".carousel-hero").children("#NormalizedName").val()+"/?"+i}else{if(O.closest(".carousel-hero").hasClass("category")){window.location.href="/coupon-codes/categories/"+O.closest(".carousel-hero").children("#NormalizedName").val()+"/?"+i}else{if(O.hasClass("btn-get-direct-code")||O.parents(".carousel-hero").hasClass("btn-get-direct-code")){l(document).trigger("getoffer",{offer:"code",id:L});if(N.from=="referredemail"){J=B(J,"source=");J=J+"&CRID=S4LDesktop"}v(J);window.location.href=Q}else{if(O.hasClass("btn-get-indirect-code")||O.parents(".carousel-hero").hasClass("btn-get-indirect-code")){l(document).trigger("getoffer",{offer:"sale",id:L,ccti:P});if(N.from=="referredemail"){J=B(J,"source=");J=J+"&CRID=S4LDesktop"}v(J);window.location.href=Q}else{if(O.hasClass("btn-get-printable-image")||O.parents(".carousel-hero").hasClass("btn-get-printable-image")){l(document).trigger("getoffer",{offer:"print",id:L});if(N.from=="referredemail"){J=B(J,"source=");J=J+"&CRID=S4LDesktop"}v(J);window.location.href=Q}else{if(!O.hasClass("js-link-to-store")&&(O.hasClass("js-see-deal")||O.parents(".ccpod").hasClass("js-see-deal"))){window.open(Q,"_blank")}else{if(O.hasClass("btn-get-printable-url")||O.parents(".carousel-hero").hasClass("btn-get-printable-url")){window.open(Q,"_blank")}else{if(O.hasClass("clickable-summary")||O.hasClass("offer-in-desc")){v(J);window.location.href=Q}else{if(!O.hasClass("js-link-to-store")&&(O.hasClass("clickable-pod")||O.parents(".ccpod").hasClass("clickable-pod"))){v(J);window.location.href=Q}else{if(O.hasClass("js-save-for-later-popup")){s(I,O)}}}}}}}}}}}}}function v(J){var K=navigator.userAgent;if(E==null||E=="false"){if(!swfobject.hasFlashPlayerVersion("10")){J+="&nof=true"}}if((K.indexOf("MSIE")!==-1)||((K.indexOf("rv:11.0")!==-1)&&(K.indexOf("Windows NT")!==-1))){var I=document.createElement("a");I.href=J;I.target="_blank";document.body.appendChild(I);I.click()}else{window.open(J,"_blank")}}function o(I,N){if(N==null){return null}var K=null;var M=N.replace("?","").split("&");for(var J=0;J<M.length;J++){var L=M[J].split("=");if(L[0]==I){K=L[1]}}return K}function n(){var L=window.location.search;if(L!=null||L!=""||L!=undefined){L=L.substr(L.indexOf("?")+1);var I=L.split("&");L="";for(var J=0;J<I.length;J++){var K=I[J].split("=");if((K[0]!=="lbox")&&(K[0]!=="cid")&&(K[0]!=="pos")&&(K[0]!=="ccti")){L+=I[J]+"&"}}L=L.substring(0,L.length-1)}else{L=""}if(L=="/"){L=""}return L}function a(K){var J=l("<div><div id='calcme'><div id='hiddiv1' style='font-size: 18px; font-weight: bold; padding-bottom: 6px;'></div><div id='hiddiv2' style='font-size: 13px; padding-bottom: 2px'></div><div id='hiddiv3' style='font-size: 11px;'></div></div></div>");l(document.body).append(J);J.css({width:"481px",height:"85px",position:"absolute",left:"-1000",top:"-1000"});l("#hiddiv1").html(K.children(".top").find(".summary").text());l("#hiddiv2").html(K.children(".top").find(".desc").text());l("#hiddiv3").html("&nbsp;");var I=l("#calcme").height();J=null;return I}function w(){var I="/coupon-codes/deals/";if(i){I+="?"+i}window.location.href=I;return false}function k(L){var I=L.parents(".ccpod");var K=f(I);var J=A(L,K);window.open(J.redirectUrl,"_blank");return false}function G(N){var Q,O;var L=N.parents(".ccpod");var K=f(L);if(K==null||K==""){K=N.closest(".js-goto-offer").attr("podid")}var I=N.closest(".js-goto-offer").attr("data-source");if(K!=null&&K!=""){Q=A(N,K);O=Q.lightboxUrl+"&lbox=1";var J=O.indexOf("&source=sms");var P=O.indexOf("&source=email");if(J!=-1){O=O.replace("&source=sms","")}if(P!=-1){O=O.replace("&source=email","")}if(I!=null&&I=="mobile"){O=O+"&CRID=S4LMobile"}}var M=N.parents(".ccpod").find(".isPrintable").text();if(M!=null&&M=="In Store Coupon"){window.open(Q.redirectUrl,"_blank")}else{v(O);window.location.href=Q.redirectUrl}}function r(K){var L=null;if(K.closest(".pod-logo").attr("data-storename")!=null){L=K.closest(".pod-logo").attr("data-storename")}else{if(K.find(".pod-logo").attr("data-storename")!=null){L=K.find(".pod-logo").attr("data-storename")}}var I;if(L!=null){I="/coupon-codes/"+L;var J=K.closest(".ccpod").attr("data-ccti");if(J){I+="?"+J}window.location.href=I}}function t(J){var I=/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/;return I.test(J)}function H(I){I.preventDefault();var R=l(I);if(I.target){R=l(I.target)}var P="Please enter a valid email address";var S=l("#email").val();if(S.length>0&&((S==null)||(l.trim(S)=="")||(!j(l.trim(S))))){var Q="Sorry, that email address is invalid. try again?";h(Q)}else{if(c==null||c==""||c==undefined){c=R.attr("podid")}var N=A(R,c).lightboxUrl;var M=B(N,"pos=");message=M+"&lbox=1&source=email";payload={email:S,cid:c,message:message};var J="/cc/sendemail";var L=JSON.stringify(payload);var O=JSON.parse(L);var K={Accept:"application/json","Content-type":"application/json"};l.ajax({url:J,type:"post",data:payload,success:function(U,V,T){l(".offer-outter-wrapper-saveforlater").hide();l("#offer-lightbox .saveForLaterEmail").hide();l(".offer-send-success").show();setTimeout(function(){l(".offer-send-success").hide();if(l.modalPopup!=undefined){l.modalPopup.close();l(".offer-outter-wrapper-saveforlater").show();l("#offer-lightbox .saveForLaterEmail").show()}},2000)},error:function(T){var U="Sorry, that email address is invalid. try again?";h(U)}})}}function b(I){I.preventDefault();var R=l(I);if(I.target){R=l(I.target)}var P="Please enter a valid email address";var S=l("#email_fb").val();l("#email_fb").removeClass("error");l(".feedback .emailerrmsg").html("");if(S.length>0&&((S==null)||(l.trim(S)=="")||(!j(l.trim(S))))){var Q="Sorry, that email address is invalid. try again?";y(Q)}else{if(c==null||c==""||c==undefined){c=R.attr("podid")}var N=A(R,c).lightboxUrl;var M=B(N,"pos=");message=M+"&lbox=1&source=email";payload={email:S,cid:c,message:message};var J="/cc/sendemail";var L=JSON.stringify(payload);var O=JSON.parse(L);var K={Accept:"application/json","Content-type":"application/json"};l.ajax({url:J,type:"post",data:payload,success:function(U,V,T){l(".feedback .saveForLaterEmail").hide();l(".feedback .thankyou_screen_fb_con").show()},error:function(T){var U="Sorry, that email address is invalid. try again?";y(U)}})}}function y(J){var I=l(".feedback .emailinput");var K=l(".feedback .emailerrmsg");K.text(J);I.addClass("error")}function h(J){var I=l(".emailinput");var K=l(".emailerrmsg");K.text(J);I.addClass("error")}function B(L,K){var M=L.indexOf(K);var I=-1;var J="";if(M>-1){I=L.substr(M).indexOf("&")}if(I>-1){J=L.substr(0,M)+L.substr(M+I+1)}if(J.length>0){return J}else{return L}}function u(J){J.preventDefault();var R=l(J);if(J.target){R=l(J.target)}var V=l.trim(l("#sms-number").val());var P=t(V);if(P){var S,V,U,T;V=V.replace(/[^0-9]/g,"");if(c==null||c==""||c==undefined){c=R.attr("podid")}var N=A(R,c).lightboxUrl;var M=B(N,"pos=");U=M+"&lbox=1&source=sms";T={phoneNumber:V,message:U};var I="/cc/sendsms";var L=JSON.stringify(T);var O=JSON.parse(L);var K={Accept:"application/json","Content-type":"application/json"};l.ajax({url:I,type:"post",data:T,success:function(X,Y,W){l(".offer-outter-wrapper-saveforlater").hide();l("#offer-lightbox .saveForLaterSMS").hide();l(".offer-send-success").show();setTimeout(function(){l(".offer-send-success").hide();if(l.modalPopup!=undefined){l.modalPopup.close();l(".offer-outter-wrapper-saveforlater").show();l("#offer-lightbox .saveForLaterEmail").show()}},2000)},error:function(W){var X="Sorry, that phone number is invalid. try again?";D(X)}})}else{var Q="Sorry, that phone number is invalid. try again?";D(Q)}}function m(N){N.preventDefault();var K=l.trim(l("#sms-number").val());var L=t(K);if(L){var K,M,P;K=K.replace(/[^0-9]/g,"");M="Follow this link to get the App: http://tinyurl.com/nlr2xyv";P={phoneNumber:K,message:M,is_app_download:true};var J="/cc/sendsms";var I=JSON.stringify(P);var O=JSON.parse(I);l.ajax({url:J,type:"post",data:P,success:function(R,S,Q){l(".smsfootage").hide();l(".smserrmsg").addClass("hidden");l(".sms-success-container").removeClass("hidden")},error:function(Q){l(".smserrmsg").removeClass("hidden")}})}else{l(".smserrmsg").removeClass("hidden")}}function D(J){var I=l(".smsinput");var K=l(".smserrmsg");K.text(J);I.addClass("error")}function z(J){var I=(J.which)?J.which:J.keyCode;if(I>31&&(I<48||I>57)){return false}return true}function g(I){window.location.href="/passbook/?cid="+c}function q(){l(".saveForLaterEmail").hide();l(".offer-send-success").hide();l(".smsinput").removeClass("error");l(".smserrmsg").text("");l(".saveForLaterSMS").show();l(".email").removeClass("active");l(".emailIcon .mobile-sprite-icons").removeClass("active");l(".print").removeClass("active");l(".printIcon .mobile-sprite-icons").removeClass("active");l(".sms").addClass("active");l(".smsIcon .mobile-sprite-icons").addClass("active");l("#sms-number").focus()}function e(){l(".saveForLaterSMS").hide();l(".offer-send-success").hide();l(".emailinput").removeClass("error");l(".emailerrmsg").text("");l(".saveForLaterEmail").show();l(".sms").removeClass("active");l(".smsIcon .mobile-sprite-icons").removeClass("active");l(".print").removeClass("active");l(".printIcon .mobile-sprite-icons").removeClass("active");l(".email").addClass("active");l(".emailIcon .mobile-sprite-icons").addClass("active");l("#email").focus()}function x(){l(".saveForLaterSMS").hide();l(".saveForLaterEmail").hide();l(".offer-send-success").hide();l(".emailinput").removeClass("error");l(".emailerrmsg").text("");l(".smsinput").removeClass("error");l(".smserrmsg").text("");l(".sms").removeClass("active");l(".email").removeClass("active");l(".smsIcon .mobile-sprite-icons").removeClass("active");l(".emailIcon .mobile-sprite-icons").removeClass("active");l(".print").addClass("active");l(".printIcon .mobile-sprite-icons").addClass("active")}function d(){E=l("#modelAttrIsSmallMobile").val();isIphoneIpod=l("#modelAttrIsIphoneIpod").val();i=n();l(".slideto").on("click",{from:"carousel"},p);l(".carousel-hero").on("click",{from:"carousel"},p);l(document).on("click",".js-goto-offer",function(I){var J=l(I);if(I.target){J=l(I.target)}if(J.is("img")||J.find("img").length>0){r(J)}else{if(J.hasClass("js-save-for-later-popup")){s(I,J)}else{G(J)}}});l(document).on("click",".js-goto-deal",function(I){var J=l(I);if(I.target){J=l(I.target)}if(!J.hasClass("js-save-for-later-popup")){k(J)}});l(".js-see-more-deals").on("click",w);l(".js-save-to-passbook").on("click",g);l(".mod-ccodesgallery").unbind("click",p);l(".mod-ccodesgallery").on("click",{from:"ccodesgallery"},p);l("#submit_sms").on("click",u);l("#submit_sms_for_app_download").on("submit",m);if(navigator.userAgent.indexOf("Android")>=0){l("#sms-number").mask("9999999999")}else{l("#sms-number").mask("(999) 999-9999")}l("#submit_email").on("click",H);l("#submit_email_fb").on("click",b);l(".sms").on("click",q);l(".email").on("click",e);l(".print").on("click",x);l(".offer-action-buttons .referred").on("click",{from:"referredemail"},p);l(".offer-in-desc").on("click",{from:"desc"},p);l(document).on("click",".js-see-store",function(I){var L=null;var J=l(I);if(I.target){J=l(I.target)}if(!J.hasClass("fav-icon")){var K=window.location.search;if(K!=null&&K!=""&&K!=undefined){K=K+"&filter=in-store"}else{K="?filter=in-store"}if(J.closest(".js-see-store").attr("data-storename")!=null){L=J.closest(".js-see-store").attr("data-storename")}else{if(J.find(".js-see-store").attr("data-storename")!=null){L=J.find(".js-see-store").attr("data-storename")}}if(L!=null){store_link="/coupon-codes/"+L+"/"+K;window.location.href=store_link}}})}function j(N){var I="@";var J=".";var M=N.indexOf(I);var K=N.length;var L=N.indexOf(J);if(N.indexOf(I)==-1){return false}if(N.indexOf(I)==-1||N.indexOf(I)==0||N.indexOf(I)==K){return false}if(N.indexOf(J)==-1||N.indexOf(J)==0||N.indexOf(J)==K){return false}if(N.indexOf(I,(M+1))!=-1){return false}if(N.substring(M-1,M)==J||N.substring(M+1,M+2)==J){return false}if(N.indexOf(J,(M+2))==-1){return false}if(N.indexOf(" ")!=-1){return false}if(N.indexOf(",")!=-1){return false}if(N.indexOf("/")!=-1){return false}if(N.indexOf("\\")!=-1){return false}if(N.indexOf("!")!=-1){return false}if(N.indexOf("#")!=-1){return false}if(N.indexOf("*")!=-1){return false}return true}return{onReady:d}})(window.jQuery||window.Zepto||window.$);$(document).ready(function(){APP_COUPONSINC.ccodesgallery.onReady()});APP_COUPONSINC.pageinfo=(function(c){function e(k){var l=c(k.target);if(l.hasClass("triangle")){l=l.siblings(".more")}if(l.hasClass("more")||l.parents(".more").length===1){if(l.text()==="Read More"){c(document).trigger("readMore");l.text("Read Less");c("#pageinfodesc").addClass("page-info-description-full");c(".triangle").addClass("up")}else{l.text("Read More");c("#pageinfodesc").removeClass("page-info-description-full");c(".triangle").removeClass("up")}}if(l.hasClass("js-redirect")){var j=l.attr("data-url");if(j!=undefined){window.location.href="https://www.coupons.com"+j}}}function a(m){m.preventDefault();var l=c(m.target),j="https://www.coupons.com",k=j+window.location.pathname;l=l.hasClass("social-share-btn")?l:c(l.parents(".social-share-btn")[0]);if(l.hasClass("facebook")){k="http://facebook.com/sharer.php?u="+encodeURIComponent(k);window.open(k,"f","directories=0,toolbar=0,menubar=0,location=1,status=0,scrollbars=1,width=700,height=350");c(document).trigger("socialShare",{type:"facebook"})}else{if(l.hasClass("twitter")){var n="Share Coupon Codes";k="http://twitter.com/share?text="+encodeURIComponent(n)+"&url="+encodeURIComponent(k);window.open(k,"t","directories=0,toolbar=0,menubar=0,location=1,status=0,scrollbars=1,width=700,height=350");c(document).trigger("socialShare",{type:"twitter"})}else{if(l.hasClass("google")){k="https://plus.google.com/share?url="+encodeURIComponent(k);window.open(k,"g","directories=0,toolbar=0,menubar=0,location=1,status=0,scrollbars=1,width=700,height=350");c(document).trigger("socialShare",{type:"google+"})}}}}function f(){c(".more").bind("click",e);c(".social-share-btn").bind("click",a);c(".page-desc .triangle").bind("click",e);c(".js-redirect").bind("click",e);c(".view-more-categories-container").bind("click",g);c(".view-more-events-container").bind("click",b);c(".new-homepage-view-more-desc-container").bind("click",h);c(".in-store-offers-view-more-desc").bind("click",i);c(".view-more-popularstores-container").bind("click",d)}function d(j){if(c(".home-popularstores-item-container").hasClass("cut-off")){c(".home-popularstores-item-container").removeClass("cut-off");c(".view-more-popularstores").text("View Less");c(".cc-new-home .view-more-popularstores-container .fa").removeClass("fa-angle-down");c(".cc-new-home .view-more-popularstores-container .fa").addClass("fa-angle-up")}else{c(".home-popularstores-item-container").addClass("cut-off");c(".view-more-popularstores").text("View More");c(".cc-new-home .view-more-popularstores-container .fa").removeClass("fa-angle-up");c(".cc-new-home .view-more-popularstores-container .fa").addClass("fa-angle-down")}}function g(j){if(c(".top-categories").hasClass("cut-off")){c(".top-categories").removeClass("cut-off");c(".view-all-categories").removeClass("hidden");c(".view-more-categories").text("View Less Categories");c(".cc-new-home .view-more-categories-container .fa").removeClass("fa-angle-down");c(".cc-new-home .view-more-categories-container .fa").addClass("fa-angle-up")}else{c(".top-categories").addClass("cut-off");c(".view-all-categories").addClass("hidden");c(".view-more-categories").text("View More Categories");c(".cc-new-home .view-more-categories-container .fa").removeClass("fa-angle-up");c(".cc-new-home .view-more-categories-container .fa").addClass("fa-angle-down")}}function b(j){if(c(".top-events").hasClass("cut-off")){c(".top-events").removeClass("cut-off");c(".view-more-events").text("View Less Events");c(".cc-new-home .view-more-events-container .fa").removeClass("fa-angle-down");c(".cc-new-home .view-more-events-container .fa").addClass("fa-angle-up")}else{c(".top-events").addClass("cut-off");c(".view-more-events").text("View More Events");c(".cc-new-home .view-more-events-container .fa").removeClass("fa-angle-up");c(".cc-new-home .view-more-events-container .fa").addClass("fa-angle-down")}}function i(j){var k=c(j.target);if(k.text()==="Read More"){k.text("Read Less");c("#pageinfodesc").addClass("page-info-description-full");c(".cc-new-home .page-desc .fa").removeClass("fa-angle-down");c(".cc-new-home .page-desc .fa").addClass("fa-angle-up")}else{k.text("Read More");c("#pageinfodesc").removeClass("page-info-description-full");c(".cc-new-home .page-desc .fa").removeClass("fa-angle-up");c(".cc-new-home .page-desc .fa").addClass("fa-angle-down")}}function h(j){if(c(".new-homepage-view-more-desc").text()==="Read More"){c(".new-homepage-view-more-desc").text("Read Less");c("#pageinfodesc").addClass("page-info-description-full");c(".cc-new-home .page-desc .fa").removeClass("fa-angle-down");c(".cc-new-home .page-desc .fa").addClass("fa-angle-up")}else{c(".new-homepage-view-more-desc").text("Read More");c("#pageinfodesc").removeClass("page-info-description-full");c(".cc-new-home .page-desc .fa").removeClass("fa-angle-up");c(".cc-new-home .page-desc .fa").addClass("fa-angle-down")}}return{onReady:f}})(jQuery);jQuery(document).ready(function(){APP_COUPONSINC.pageinfo.onReady()});(function(a){a.fn.textfill=function(e){function b(){c.debug&&("undefined"!=typeof console&&"undefined"!=typeof console.debug)&&console.debug.apply(console,arguments)}function d(){"undefined"!=typeof console&&"undefined"!=typeof console.warn&&console.warn.apply(console,arguments)}function g(j,i,o,m,n,l){function p(k,h){var q=" / ";k>h?q=" > ":k==h&&(q=" = ");return q}b(j+"font: "+i.css("font-size")+", H: "+i.height()+p(i.height(),o)+o+", W: "+i.width()+p(i.width(),m)+m+", minFontPixels: "+n+", maxFontPixels: "+l)}function f(s,r,p,m,n,j,q,i){for(g(s+": ",r,n,j,q,i);q<i-1;){var o=Math.floor((q+i)/2);r.css("font-size",o);if(p.call(r)<=m){if(q=o,p.call(r)==m){break}}else{i=o}g(s+": ",r,n,j,q,i)}r.css("font-size",i);p.call(r)<=m&&(q=i,g(s+"* ",r,n,j,q,i));return q}var c=a.extend({debug:!1,maxFontPixels:40,minFontPixels:4,innerTag:"span",widthOnly:!1,success:null,callback:null,fail:null,complete:null,explicitWidth:null,explicitHeight:null},e);this.each(function(){var m=a(c.innerTag+":visible:first",this),i=c.explicitHeight||a(this).height(),o=c.explicitWidth||a(this).width(),l=m.css("font-size");b("Opts: ",c);b("Vars: maxHeight: "+i+", maxWidth: "+o);var n=c.minFontPixels,j=0>=c.maxFontPixels?i:c.maxFontPixels,p=void 0;c.widthOnly||(p=f("H",m,a.fn.height,i,i,o,n,j));n=f("W",m,a.fn.width,o,i,o,n,j);c.widthOnly?m.css("font-size",n):m.css("font-size",Math.min(p,n));b("Final: "+m.css("font-size"));m.width()>o||m.height()>i&&!c.widthOnly?(m.css("font-size",l),c.fail&&c.fail(this)):c.success?c.success(this):c.callback&&(d("callback is deprecated, use success, instead"),c.callback(this))});c.complete&&c.complete(this);return this}})(window.jQuery);APP_COUPONSINC.iframeLoader=(function(b){function c(){var m=a("pid");var f=a("nid");var p=a("zid");if((m==null)||!d(m)){m="13306"}if((p==null)||!d(p)){p="iq37"}if((f==null)||!d(f)){f="10"}if(userLoggedIn!=undefined&&userLoggedIn==true){loggedin=1}else{loggedin=0}var n="&pid="+m+"&zid="+p+"&nid="+f;var s="";var r=a("testad");if(r=="true"||r=="false"||r=="codes"){s=r}var t=b("#iframeAd").parents(".container-mrec-ad");if(t.length>0){var g=t[0].getAttribute("data-adpagetype");var q="//acaster.coupons.com/?AdSize=300x250&pzn="+m+p+f+n+"&target=coupons&pagetype="+g+"&btracking="+ratingBcookieId+"&loggedin="+loggedin+"&testad="+s;b("#iframeAd").attr("src",q)}var l=b("#iframeAdLeadboard").parents(".container-leadboard");if(l.length>0){var g=l[0].getAttribute("data-adpagetype");var o="//acaster.coupons.com/?AdSize=728x90&pzn="+m+p+f+n+"&target=coupons&pagetype="+g+"&btracking="+ratingBcookieId+"&loggedin="+loggedin+"&testad="+s;b("#iframeAdLeadboard").attr("src",o)}var j=b("#iframeAdNative");if(j.length>0){var k=j.parents(".container-native-ad");if(k.length>0){var g=k[0].getAttribute("data-adpagetype");var u="//acaster.coupons.com/?AdSize=300x600&pzn="+m+p+f+n+"&target=coupons&pagetype="+g+"&btracking="+ratingBcookieId+"&loggedin="+loggedin+"&testad="+s;b("#iframeAdNative").attr("src",u)}}var i="";if(b("a").hasClass("sweepstake")){i=b("a").attr("href");b.modalPopup.open({src:i});b("a").on("click",function(){b.modalPopup.open({target:"#modal-popup-iframe",maxWidth:759})})}var h=b(".userstudy-feedback");var e="";if(h.length>0){e="//www.coupons.com/feedback/?"+h[0].getAttribute("data-feedback-url");b.modalPopup.open({src:e})}b(".userstudy-feedback").click(function(){b.modalPopup.open({target:"#modal-popup-iframe",maxWidth:759})})}function d(e){var f=/^[0-9a-zA-Z]+$/;if((e.match(f))){return true}else{return false}}function a(e){var g=null;var k=window.location.search;var j=k.replace("?","").split("&");for(var f=0;f<j.length;f++){var h=j[f].split("=");if(h[0]==e){g=h[1]}}return g}return{onReady:c}})(jQuery);jQuery(window).load(function(){APP_COUPONSINC.iframeLoader.onReady()});APP_COUPONSINC.signout=(function(b){function a(d){d.preventDefault();pnzdata="pid=13306&nid=10&zid=iq37";b.ajax({url:"/sign-out",type:"POST",dataType:"json",data:pnzdata,success:function(f,g,e){window.location.reload()},error:function(f,e){if(f.status===0){console.log("Not connect.\n Verify Network.")}else{if(f.status==404){console.log("Requested page not found. [404]")}else{if(f.status==500){console.log("Internal Server Error [500].")}else{if(e==="parsererror"){console.log("Requested JSON parse failed.")}else{if(e==="timeout"){console.log("Time out error.")}else{if(e==="abort"){console.log("Ajax request aborted.")}else{console.log("Uncaught Error.\n"+f.responseText)}}}}}}}});return false}function c(){b(".signoff").bind("click",a)}return{onReady:c}})(jQuery);jQuery(window).load(function(){APP_COUPONSINC.signout.onReady()});
/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery||window.Zepto||window.$)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date();s.setDate(s.getDate()+q)}o=c.json?JSON.stringify(o):String(o);return(document.cookie=[c.raw?p:encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join(""))}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend({},g,{expires:-1}));return true}return false}}));APP_COUPONSINC.offer=(function(f){function i(j){var n=f(j);if(j.target){n=f(j.target)}if(!n.hasClass("super_shopper_form")){n=n.parents(".super_shopper_form")}var k="Sorry, that email address is invalid. Try again?";var o=n.find(".emailinput");var q=n.find(".emailMsg");var r=n.parents(".super-shopper").find(".thankyou_screen");if((o.val()==null)||(o.val()=="")){q.text(k);q.removeClass("hidden");o.addClass("error");o.focus();return false}if(b(o.val())==false){o.val("");o.focus();q.text(k);q.removeClass("hidden");o.addClass("error");return false}var m=n.serialize();var l=f("#offer-popup-merchant-name").val();var p=f("#offer-id").val();m=m+"&submit=SignUp&email_address_="+o.val()+"&OFFER_ID="+p+"&STORE_NAME="+l+"&CAMPAIGN_=api_onlinesavings_bb_regpage&PID=13306&ZID=iq37&NID=10&ACTIVE=1&SUPERSHOPPER_REGISTERED=1&SUPERSHOPPER_STATUS=1&SIGNUP_FORM=Outlink&_ri_=X0Gzc2X%253DWQpglLjHJlTQGnN8csdM8yjzeRmtcnLwqWpi4zdizdTVwjpnpgHlpgneHmgJoXX0Gzc2X%253DWQpglLjHJlTQGzbP4YIL1FJnEcnkzabjt6MgElIStn";j.preventDefault();f.ajax({url:"/cc/userreg",type:"post",data:m,dataType:"text",charset:"UTF-8",ContentType:"text/html;charset=UTF-8",complete:function(t,u,s){if(t.responseText==409){}else{if(t.responseText==500){}else{if(t.responseText==200){}}}n.hide();r.removeClass("hidden");n.parents(".super-shopper").addClass("success")}})}function b(o){var j="@";var k=".";var n=o.indexOf(j);var l=o.length;var m=o.indexOf(k);if(o.indexOf(j)==-1){return false}if(o.indexOf(j)==-1||o.indexOf(j)==0||o.indexOf(j)==l){return false}if(o.indexOf(k)==-1||o.indexOf(k)==0||o.indexOf(k)==l){return false}if(o.indexOf(j,(n+1))!=-1){return false}if(o.substring(n-1,n)==k||o.substring(n+1,n+2)==k){return false}if(o.indexOf(k,(n+2))==-1){return false}if(o.indexOf(" ")!=-1){return false}if(o.indexOf(",")!=-1){return false}if(o.indexOf("/")!=-1){return false}if(o.indexOf("\\")!=-1){return false}if(o.indexOf("!")!=-1){return false}if(o.indexOf("#")!=-1){return false}if(o.indexOf("*")!=-1){return false}return true}function c(){f(".outlink-offer-content").addClass("hidden");f(".outlink-voting-page").removeClass("hidden")}function h(){f(".outlink-offer-content").removeClass("hidden");f(".outlink-voting-page").addClass("hidden");f(".outlink-voting-thankyou-page").addClass("hidden")}function a(){f(".outlink-voting-page").addClass("hidden");f(".outlink-voting-thankyou-page").removeClass("hidden")}function g(){f(".offer-action-vote").bind("click",c);f(".outlink-back-to-offer").bind("click",h);f(".outlink-voting-btn").bind("click",a);f(".super_shopper_form").bind("submit",i);var k=d("cid");if(k!=null){if(f("#offer-popup").length>0){f.modalPopup.open({target:"#offer-popup",maxWidth:574})}if(f(".offer-code-b").length>0){f(".offer-code-b").textfill({maxFontPixels:32})}ZeroClipboard.config({swfPath:window.location.protocol+"//"+window.location.host+"/resources/swf/ZeroClipboard.swf"});if(f("#offer-zero-clipboard").length>0){var j=new ZeroClipboard(f("#offer-zero-clipboard"));j.on("ready",function(l){console.log("movie is loaded");if(/MSIE|Trident/.test(window.navigator.userAgent)){(function(n){var m=ZeroClipboard.config("containerId");n("#"+m).on("focusin",false)})(window.jQuery)}j.on("copy",function(m){m.clipboardData.setData("text/plain",f(m.target).data("clipboardText"));f("#offer-zero-clipboard").html("Copied");f("#offer-zero-clipboard").css("background","#0492B6");console.log("Copied text to clipboard: "+f(m.target).data("clipboardText"))});j.on("aftercopy",function(m){console.log("Copied text to clipboard: "+m.data["text/plain"])})});j.on("error",function(l){console.log('ZeroClipboard error of type "'+l.name+'": '+l.message);ZeroClipboard.destroy()})}}}function d(j){var l=null;var o=window.location.search;var n=o.replace("?","").split("&");for(var k=0;k<n.length;k++){var m=n[k].split("=");if(m[0]==j){l=m[1]}}return l}function e(){var l=f(".offer-print-pod img").attr("src");var k="about:blank";var j=window.open(k,"_blank");j.document.open();j.document.write("<html>\n<head>\n<title>"+f("#offer-popup-merchant-name").val()+" Coupon</title>\n<script>\nfunction step1() {\n setTimeout('step2()', 10);\n}\nfunction step2() {\n window.print();\n window.close();\n}\n<\/script>\n</head>\n<body onLoad='step1()'>\n<img src='"+l+"'/>\n</body>\n</html>\n");j.document.close()}return{onReady:g,printCoupon:e}})(window.jQuery||window.Zepto||window.$);$(document).ready(function(){APP_COUPONSINC.offer.onReady()});(function(a){var j="<div id='placeholder' class='cc-hide'></div>";var g,d;var c={};var h={status:"active",modalTitle:false,modalClose:true,titleBar:false,modalCloseIcon:'<button title="Close (Esc)" type="button" class="close-icon">&times;</button>',wrapperClass:"modalPopup",error:"The system is experiencing difficulties, please check back shortly.",inprogress:"Loading ..."};c.items={};var f=false;var b=false;a.modalPopup={open:function(m){if(m!=undefined){c.items=a.extend({},h,m)}if(c.items.src){f=true}else{f=false}if(f){var l='<iframe class="cc-iframe" src="'+c.items.src+'" frameborder="0" allowfullscreen></iframe>';if(a("#modal-popup-iframe").length==0&&a("#modalPopupOpen").length<1){e._popupTemplate(1)}e._loadContent(a(l))}if(c.items.target){if(c.items.target=="#modal-popup-iframe"){b=true;if(a("#modal-popup-iframe").length==0&&a("#modalPopupOpen").length<1){e._popupTemplate(1)}d=a(c.items.target).removeClass("cc-hide");e._loadContent(d)}else{b=false;if(a("#modal-popup").length==0&&a("#modalPopupOpen").length<1){e._popupTemplate(0)}g=a(c.items.target).after(j).detach().removeClass("cc-hide");e._loadContent(g)}if(c.items.callbacks!=undefined&&c.items.callbacks.open&&typeof(c.items.callbacks.open)==="function"){c.items.callbacks.open()}}if(c.items.url){if(a("#modal-popup").length==0&&a("#modalPopupOpen").length<1){e._popupTemplate(0)}var k={url:c.items.url,success:function(n){e._loadContent(a(n));if(c.items.callbacks!=undefined&&c.items.callbacks.success&&typeof(c.items.callbacks.success)==="function"){c.items.callbacks.success()}},error:function(){console.log("error")}};if(c.items.ajaxObj){k=a.extend({},k,c.items.ajaxObj)}a.ajax(k);return true}},close:function(){if(b){a("#modal-popup")[0].id="modal-popup-iframe";a("#modal-popup-iframe").addClass("cc-hide");a("#modal-popup-iframe").removeAttr("style");d=null}else{a("#modal-popup").remove()}a("#modalPopupOpen").remove();a("html").removeAttr("style");if(g){a("#placeholder.cc-hide").after(g.addClass("cc-hide")).detach();g=null}if(c.items.callbacks!=undefined&&c.items.callbacks.popupClose&&typeof(c.items.callbacks.popupClose)==="function"){c.items.callbacks.popupClose()}return true}};var i="";var e={_popupTemplate:function(k){if(k){i='<div id="modal-popup-iframe" class="modalPopup cc-hide"> <div class="modal-container"> <div class="modal-body"> <span class="modal-close"></span><div class="modal-content"></div></div></div></div>'}else{i='<div id="modal-popup" class="modalPopup"> <div class="modal-container"> <div class="modal-body"> <span class="modal-close"></span><div class="modal-content"></div></div></div></div>'}a("body").append(i);a(".modal-body .modal-close").html(c.items.modalCloseIcon).click(function(){a.modalPopup.close()});return true},_loadContent:function(k){if(f){if(a(".modal-content>iframe").length==0){k.appendTo(a("#modal-popup-iframe .modal-content"))}}else{if(b){a("#modal-popup-iframe")[0].id="modal-popup"}else{k.appendTo(a("#modal-popup .modal-content"))}if(c.items.maxWidth){a(".modal-body").css("max-width",c.items.maxWidth)}e._adjustPosition();a("html").css("overflow","hidden");e._dimBackground()}return true},_adjustPosition:function(){var o=a(window).height();var l=a("#modal-popup .modal-body").height();var k=a("#frame-popup .modal-body").height();var n=Math.max(l,k);var m=Math.round((o-n)/2);if(m<0){m=0}a("#modal-popup").css("margin-top",m);return true},_dimBackground:function(){if(a("#modalPopupOpen").length>0){}else{var k=document.createElement("div");k.id="modalPopupOpen";document.body.insertBefore(k,document.body.firstChild)}}};a(window).bind("resize.modalPopup",function(){e._adjustPosition()});a(document).keydown(function(k){if(k.keyCode==27){a.modalPopup.close()}})})(window.jQuery||window.Zepto||window.$);
/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
 * Copyright (c) 2014 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.1.6
 */
!function(aZ,aY){var aX,aW,aT=aZ,aS=aT.document,aR=aT.navigator,aQ=aT.setTimeout,aP=aT.encodeURIComponent,aM=aT.ActiveXObject,aL=aT.Error,aK=aT.Number.parseInt||aT.parseInt,aJ=aT.Number.parseFloat||aT.parseFloat,aI=aT.Number.isNaN||aT.isNaN,aG=aT.Math.round,aF=aT.Date.now,aE=aT.Object.keys,aD=aT.Object.defineProperty,aC=aT.Object.prototype.hasOwnProperty,aB=aT.Array.prototype.slice,aA=function(){var f=function(b){return b};if("function"==typeof aT.wrap&&"function"==typeof aT.unwrap){try{var e=aS.createElement("div"),h=aT.unwrap(e);1===e.nodeType&&h&&1===h.nodeType&&(f=aT.unwrap)}catch(g){}}return f}(),az=function(b){return aB.call(b,0)},ay=function(){var b,p,o,n,m,l,k=az(arguments),j=k[0]||{};for(b=1,p=k.length;p>b;b++){if(null!=(o=k[b])){for(n in o){aC.call(o,n)&&(m=j[n],l=o[n],j!==l&&l!==aY&&(j[n]=l))}}}return j},ax=function(g){var f,j,i,h;if("object"!=typeof g||null==g){f=g}else{if("number"==typeof g.length){for(f=[],j=0,i=g.length;i>j;j++){aC.call(g,j)&&(f[j]=ax(g[j]))}}else{f={};for(h in g){aC.call(g,h)&&(f[h]=ax(g[h]))}}}return f},aw=function(g,f){for(var j={},i=0,h=f.length;h>i;i++){f[i] in g&&(j[f[i]]=g[f[i]])}return j},au=function(f,e){var h={};for(var g in f){-1===e.indexOf(g)&&(h[g]=f[g])}return h},bA=function(d){if(d){for(var c in d){aC.call(d,c)&&delete d[c]}}return d},by=function(d,c){if(d&&1===d.nodeType&&d.ownerDocument&&c&&(1===c.nodeType&&c.ownerDocument&&c.ownerDocument===d.ownerDocument||9===c.nodeType&&!c.ownerDocument&&c===d.ownerDocument)){do{if(d===c){return !0}d=d.parentNode}while(d)}return !1},bx=function(d){var c;return"string"==typeof d&&d&&(c=d.split("#")[0].split("?")[0],c=d.slice(0,d.lastIndexOf("/")+1)),c},bw=function(e){var d,f;return"string"==typeof e&&e&&(f=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),f&&f[1]?d=f[1]:(f=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),f&&f[1]&&(d=f[1]))),d},bv=function(){var e,d;try{throw new aL}catch(f){d=f}return d&&(e=d.sourceURL||d.fileName||bw(d.stack)),e},bs=function(){var b,f,e;if(aS.currentScript&&(b=aS.currentScript.src)){return b}if(f=aS.getElementsByTagName("script"),1===f.length){return f[0].src||aY}if("readyState" in f[0]){for(e=f.length;e--;){if("interactive"===f[e].readyState&&(b=f[e].src)){return b}}}return"loading"===aS.readyState&&(b=f[f.length-1].src)?b:(b=bv())?b:aY},br=function(){var b,h,g,f=aS.getElementsByTagName("script");for(b=f.length;b--;){if(!(g=f[b].src)){h=null;break}if(g=bx(g),null==h){h=g}else{if(h!==g){h=null;break}}}return h||aY},bq=function(){var b=bx(bs())||br()||"";return b+"ZeroClipboard.swf"},bp={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},bo="11.0.0",bl={},bk={},bj=null,bi={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},bh={swfPath:bq(),trustedDomains:aZ.location.host?[aZ.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:30000,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},bg=function(d){if("object"==typeof d&&null!==d){for(var c in d){if(aC.call(d,c)){if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(c)){bh[c]=d[c]}else{if(null==bp.bridge){if("containerId"===c||"swfObjectId"===c){if(!aH(d[c])){throw new Error("The specified `"+c+"` value is not valid as an HTML4 Element ID")}bh[c]=d[c]}else{bh[c]=d[c]}}}}}}if("string"!=typeof d||!d){return ax(bh)}if(aC.call(bh,d)){return bh[d]}},be=function(){return{browser:aw(aR,["userAgent","platform","appName"]),flash:au(bp,["bridge"]),zeroclipboard:{version:ag.version,config:ag.config()}}},bd=function(){return !!(bp.disabled||bp.outdated||bp.unavailable||bp.deactivated)},bc=function(i,h){var n,m,l,k={};if("string"==typeof i&&i){l=i.toLowerCase().split(/\s+/)}else{if("object"==typeof i&&i&&"undefined"==typeof h){for(n in i){aC.call(i,n)&&"string"==typeof n&&n&&"function"==typeof i[n]&&ag.on(n,i[n])}}}if(l&&l.length){for(n=0,m=l.length;m>n;n++){i=l[n].replace(/^on/,""),k[i]=!0,bl[i]||(bl[i]=[]),bl[i].push(h)}if(k.ready&&bp.ready&&ag.emit({type:"ready"}),k.error){var j=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,m=j.length;m>n;n++){if(bp[j[n]]===!0){ag.emit({type:"error",name:"flash-"+j[n]});break}}}}return ag},ba=function(i,h){var n,m,l,k,j;if(0===arguments.length){k=aE(bl)}else{if("string"==typeof i&&i){k=i.split(/\s+/)}else{if("object"==typeof i&&i&&"undefined"==typeof h){for(n in i){aC.call(i,n)&&"string"==typeof n&&n&&"function"==typeof i[n]&&ag.off(n,i[n])}}}}if(k&&k.length){for(n=0,m=k.length;m>n;n++){if(i=k[n].toLowerCase().replace(/^on/,""),j=bl[i],j&&j.length){if(h){for(l=j.indexOf(h);-1!==l;){j.splice(l,1),l=j.indexOf(h,l)}}else{j.length=0}}}}return ag},a9=function(d){var c;return c="string"==typeof d&&d?ax(bl[d])||null:ax(bl)},a8=function(f){var e,h,g;return f=am(f),f&&!an(f)?"ready"===f.type&&bp.overdue===!0?ag.emit({type:"error",name:"flash-overdue"}):(e=ay({},f),aN.call(this,e),"copy"===f.type&&(g=ap(bk),h=g.data,bj=g.formatMap),h):void 0},a7=function(){if("boolean"!=typeof bp.ready&&(bp.ready=!1),!ag.isFlashUnusable()&&null===bp.bridge){var b=bh.flashLoadTimeout;"number"==typeof b&&b>=0&&aQ(function(){"boolean"!=typeof bp.deactivated&&(bp.deactivated=!0),bp.deactivated===!0&&ag.emit({type:"error",name:"flash-deactivated"})},b),bp.overdue=!1,bt()}},a6=function(){ag.clearData(),ag.blur(),ag.emit("destroy"),aU(),ag.off()},a5=function(f,e){var h;if("object"==typeof f&&f&&"undefined"==typeof e){h=f,ag.clearData()}else{if("string"!=typeof f||!f){return}h={},h[f]=e}for(var g in h){"string"==typeof g&&g&&aC.call(h,g)&&"string"==typeof h[g]&&h[g]&&(bk[g]=h[g])}},a4=function(b){"undefined"==typeof b?(bA(bk),bj=null):"string"==typeof b&&aC.call(bk,b)&&delete bk[b]},bJ=function(b){return"undefined"==typeof b?ax(bk):"string"==typeof b&&aC.call(bk,b)?bk[b]:void 0},a2=function(f){if(f&&1===f.nodeType){aX&&(aa(aX,bh.activeClass),aX!==f&&aa(aX,bh.hoverClass)),aX=f,aj(f,bh.hoverClass);var c=f.getAttribute("title")||bh.title;if("string"==typeof c&&c){var h=bH(bp.bridge);h&&h.setAttribute("title",c)}var g=bh.forceHandCursor===!0||"pointer"===bM(f,"cursor");bn(g),bG()}},bE=function(){var b=bH(bp.bridge);b&&(b.removeAttribute("title"),b.style.left="0px",b.style.top="-9999px",b.style.width="1px",b.style.top="1px"),aX&&(aa(aX,bh.hoverClass),aa(aX,bh.activeClass),aX=null)},bf=function(){return aX||null},aH=function(b){return"string"==typeof b&&b&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(b)},am=function(d){var c;if("string"==typeof d&&d?(c=d,d={}):"object"==typeof d&&d&&"string"==typeof d.type&&d.type&&(c=d.type),c){!d.target&&/^(copy|aftercopy|_click)$/.test(c.toLowerCase())&&(d.target=aW),ay(d,{type:c.toLowerCase(),target:d.target||aX||null,relatedTarget:d.relatedTarget||null,currentTarget:bp&&bp.bridge||null,timeStamp:d.timeStamp||aF()||null});var f=bi[d.type];return"error"===d.type&&d.name&&f&&(f=f[d.name]),f&&(d.message=f),"ready"===d.type&&ay(d,{target:null,version:bp.version}),"error"===d.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(d.name)&&ay(d,{target:null,minimumVersion:bo}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(d.name)&&ay(d,{version:bp.version})),"copy"===d.type&&(d.clipboardData={setData:ag.setData,clearData:ag.clearData}),"aftercopy"===d.type&&(d=ah(d,bj)),d.target&&!d.relatedTarget&&(d.relatedTarget=ae(d.target)),d=bO(d)}},ae=function(d){var c=d&&d.getAttribute&&d.getAttribute("data-clipboard-target");return c?aS.getElementById(c):null},bO=function(F){if(F&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(F.type)){var E=F.target,D="_mouseover"===F.type&&F.relatedTarget?F.relatedTarget:aY,C="_mouseout"===F.type&&F.relatedTarget?F.relatedTarget:aY,B=bP(E),A=aT.screenLeft||aT.screenX||0,z=aT.screenTop||aT.screenY||0,y=aS.body.scrollLeft+aS.documentElement.scrollLeft,x=aS.body.scrollTop+aS.documentElement.scrollTop,w=B.left+("number"==typeof F._stageX?F._stageX:0),v=B.top+("number"==typeof F._stageY?F._stageY:0),u=w-y,f=v-x,e=A+u,b=z+f,H="number"==typeof F.movementX?F.movementX:0,G="number"==typeof F.movementY?F.movementY:0;delete F._stageX,delete F._stageY,ay(F,{srcElement:E,fromElement:D,toElement:C,screenX:e,screenY:b,pageX:w,pageY:v,clientX:u,clientY:f,x:u,y:f,movementX:H,movementY:G,offsetX:0,offsetY:0,layerX:0,layerY:0})}return F},bF=function(d){var c=d&&"string"==typeof d.type&&d.type||"";return !/^(?:(?:before)?copy|destroy)$/.test(c)},bm=function(f,e,h,g){g?aQ(function(){f.apply(e,h)},0):f.apply(e,h)},aN=function(v){if("object"==typeof v&&v&&v.type){var u=bF(v),t=bl["*"]||[],s=bl[v.type]||[],r=t.concat(s);if(r&&r.length){var q,p,o,n,m,e=this;for(q=0,p=r.length;p>q;q++){o=r[q],n=e,"string"==typeof o&&"function"==typeof aT[o]&&(o=aT[o]),"object"==typeof o&&o&&"function"==typeof o.handleEvent&&(n=o,o=o.handleEvent),"function"==typeof o&&(m=ay({},v),bm(o,n,[m],u))}}return this}},an=function(d){var c=d.target||aX||null,p="swf"===d._source;delete d._source;var o=["flash-disabled","flash-outdated","flash-unavailable","flash-deactivated","flash-overdue"];switch(d.type){case"error":-1!==o.indexOf(d.name)&&ay(bp,{disabled:"flash-disabled"===d.name,outdated:"flash-outdated"===d.name,unavailable:"flash-unavailable"===d.name,deactivated:"flash-deactivated"===d.name,overdue:"flash-overdue"===d.name,ready:!1});break;case"ready":var n=bp.deactivated===!0;ay(bp,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:n,ready:!n});break;case"beforecopy":aW=c;break;case"copy":var m,l,k=d.relatedTarget;!bk["text/html"]&&!bk["text/plain"]&&k&&(l=k.value||k.outerHTML||k.innerHTML)&&(m=k.value||k.textContent||k.innerText)?(d.clipboardData.clearData(),d.clipboardData.setData("text/plain",m),l!==m&&d.clipboardData.setData("text/html",l)):!bk["text/plain"]&&d.target&&(m=d.target.getAttribute("data-clipboard-text"))&&(d.clipboardData.clearData(),d.clipboardData.setData("text/plain",m));break;case"aftercopy":ag.clearData(),c&&c!==ar()&&c.focus&&c.focus();break;case"_mouseover":ag.focus(c),bh.bubbleEvents===!0&&p&&(c&&c!==d.relatedTarget&&!by(d.relatedTarget,c)&&af(ay({},d,{type:"mouseenter",bubbles:!1,cancelable:!1})),af(ay({},d,{type:"mouseover"})));break;case"_mouseout":ag.blur(),bh.bubbleEvents===!0&&p&&(c&&c!==d.relatedTarget&&!by(d.relatedTarget,c)&&af(ay({},d,{type:"mouseleave",bubbles:!1,cancelable:!1})),af(ay({},d,{type:"mouseout"})));break;case"_mousedown":aj(c,bh.activeClass),bh.bubbleEvents===!0&&p&&af(ay({},d,{type:d.type.slice(1)}));break;case"_mouseup":aa(c,bh.activeClass),bh.bubbleEvents===!0&&p&&af(ay({},d,{type:d.type.slice(1)}));break;case"_click":aW=null,bh.bubbleEvents===!0&&p&&af(ay({},d,{type:d.type.slice(1)}));break;case"_mousemove":bh.bubbleEvents===!0&&p&&af(ay({},d,{type:d.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(d.type)?!0:void 0},af=function(f){if(f&&"string"==typeof f.type&&f){var e,l=f.target||null,k=l&&l.ownerDocument||aS,j={view:k.defaultView||aT,canBubble:!0,cancelable:!0,detail:"click"===f.type?1:0,button:"number"==typeof f.which?f.which-1:"number"==typeof f.button?f.button:k.createEvent?0:1},i=ay(j,f);l&&k.createEvent&&l.dispatchEvent&&(i=[i.type,i.canBubble,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget],e=k.createEvent("MouseEvents"),e.initMouseEvent&&(e.initMouseEvent.apply(e,i),e._source="js",l.dispatchEvent(e)))}},bQ=function(){var b=aS.createElement("div");return b.id=bh.containerId,b.className=bh.containerClass,b.style.position="absolute",b.style.left="0px",b.style.top="-9999px",b.style.width="1px",b.style.height="1px",b.style.zIndex=""+aO(bh.zIndex),b},bH=function(d){for(var c=d&&d.parentNode;c&&"OBJECT"===c.nodeName&&c.parentNode;){c=c.parentNode}return c||null},bt=function(){var t,s=bp.bridge,r=bH(s);if(!s){var q=a0(aT.location.host,bh),p="never"===q?"none":"all",o=bK(bh),n=bh.swfPath+bS(bh.swfPath,bh);r=bQ();var m=aS.createElement("div");r.appendChild(m),aS.body.appendChild(r);var f=aS.createElement("div"),e="activex"===bp.pluginType;f.innerHTML='<object id="'+bh.swfObjectId+'" name="'+bh.swfObjectId+'" width="100%" height="100%" '+(e?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+n+'"')+">"+(e?'<param name="movie" value="'+n+'"/>':"")+'<param name="allowScriptAccess" value="'+q+'"/><param name="allowNetworking" value="'+p+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+o+'"/></object>',s=f.firstChild,f=null,aA(s).ZeroClipboard=ag,r.replaceChild(s,m)}return s||(s=aS[bh.swfObjectId],s&&(t=s.length)&&(s=s[t-1]),!s&&r&&(s=r.firstChild)),bp.bridge=s||null,s},aU=function(){var e=bp.bridge;if(e){var d=bH(e);d&&("activex"===bp.pluginType&&"readyState" in e?(e.style.display="none",function f(){if(4===e.readyState){for(var a in e){"function"==typeof e[a]&&(e[a]=null)}e.parentNode&&e.parentNode.removeChild(e),d.parentNode&&d.parentNode.removeChild(d)}else{aQ(f,10)}}()):(e.parentNode&&e.parentNode.removeChild(e),d.parentNode&&d.parentNode.removeChild(d))),bp.ready=null,bp.bridge=null,bp.deactivated=null}},ap=function(f){var e={},h={};if("object"==typeof f&&f){for(var g in f){if(g&&aC.call(f,g)&&"string"==typeof f[g]&&f[g]){switch(g.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":e.text=f[g],h.text=g;break;case"text/html":case"html":case"air:html":case"flash:html":e.html=f[g],h.html=g;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":e.rtf=f[g],h.rtf=g}}}return{data:e,formatMap:h}}},ah=function(h,g){if("object"!=typeof h||!h||"object"!=typeof g||!g){return h}var l={};for(var k in h){if(aC.call(h,k)){if("success"!==k&&"data"!==k){l[k]=h[k];continue}l[k]={};var j=h[k];for(var i in j){i&&aC.call(j,i)&&aC.call(g,i)&&(l[k][g[i]]=j[i])}}}return l},bS=function(e,d){var f=null==d||d&&d.cacheBust===!0;return f?(-1===e.indexOf("?")?"?":"&")+"noCache="+aF():""},bK=function(i){var e,n,m,l,k="",j=[];if(i.trustedDomains&&("string"==typeof i.trustedDomains?l=[i.trustedDomains]:"object"==typeof i.trustedDomains&&"length" in i.trustedDomains&&(l=i.trustedDomains)),l&&l.length){for(e=0,n=l.length;n>e;e++){if(aC.call(l,e)&&l[e]&&"string"==typeof l[e]){if(m=bz(l[e]),!m){continue}if("*"===m){j.length=0,j.push(m);break}j.push.apply(j,[m,"//"+m,aT.location.protocol+"//"+m])}}}return j.length&&(k+="trustedOrigins="+aP(j.join(","))),i.forceEnhancedClipboard===!0&&(k+=(k?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof i.swfObjectId&&i.swfObjectId&&(k+=(k?"&":"")+"swfObjectId="+aP(i.swfObjectId)),k},bz=function(e){if(null==e||""===e){return null}if(e=e.replace(/^\s+|\s+$/g,""),""===e){return null}var d=e.indexOf("//");e=-1===d?e:e.slice(d+2);var f=e.indexOf("/");return e=-1===f?e:-1===d||0===f?null:e.slice(0,f),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},a0=function(){var b=function(g){var f,j,i,h=[];if("string"==typeof g&&(g=[g]),"object"!=typeof g||!g||"number"!=typeof g.length){return h}for(f=0,j=g.length;j>f;f++){if(aC.call(g,f)&&(i=bz(g[f]))){if("*"===i){h.length=0,h.push("*");break}-1===h.indexOf(i)&&h.push(i)}}return h};return function(a,j){var i=bz(j.swfPath);null===i&&(i=a);var h=b(j.trustedDomains),g=h.length;if(g>0){if(1===g&&"*"===h[0]){return"always"}if(-1!==h.indexOf(a)){return 1===g&&a===i?"sameDomain":"always"}}return"never"}}(),ar=function(){try{return aS.activeElement}catch(b){return null}},aj=function(i,h){if(!i||1!==i.nodeType){return i}if(i.classList){return i.classList.contains(h)||i.classList.add(h),i}if(h&&"string"==typeof h){var n=(h||"").split(/\s+/);if(1===i.nodeType){if(i.className){for(var m=" "+i.className+" ",l=i.className,k=0,j=n.length;j>k;k++){m.indexOf(" "+n[k]+" ")<0&&(l+=" "+n[k])}i.className=l.replace(/^\s+|\s+$/g,"")}else{i.className=h}}}return i},aa=function(h,g){if(!h||1!==h.nodeType){return h}if(h.classList){return h.classList.contains(g)&&h.classList.remove(g),h}if("string"==typeof g&&g){var l=g.split(/\s+/);if(1===h.nodeType&&h.className){for(var k=(" "+h.className+" ").replace(/[\n\t]/g," "),j=0,i=l.length;i>j;j++){k=k.replace(" "+l[j]+" "," ")}h.className=k.replace(/^\s+|\s+$/g,"")}}return h},bM=function(e,d){var f=aT.getComputedStyle(e,null).getPropertyValue(d);return"cursor"!==d||f&&"auto"!==f||"A"!==e.nodeName?f:"pointer"},bC=function(){var f,e,h,g=1;return"function"==typeof aS.body.getBoundingClientRect&&(f=aS.body.getBoundingClientRect(),e=f.right-f.left,h=aS.body.offsetWidth,g=aG(e/h*100)/100),g},bP=function(f){var e={left:0,top:0,width:0,height:0};if(f.getBoundingClientRect){var p,o,n,m=f.getBoundingClientRect();"pageXOffset" in aT&&"pageYOffset" in aT?(p=aT.pageXOffset,o=aT.pageYOffset):(n=bC(),p=aG(aS.documentElement.scrollLeft/n),o=aG(aS.documentElement.scrollTop/n));var l=aS.documentElement.clientLeft||0,k=aS.documentElement.clientTop||0;e.left=m.left+p-l,e.top=m.top+o-k,e.width="width" in m?m.width:m.right-m.left,e.height="height" in m?m.height:m.bottom-m.top}return e},bG=function(){var d;if(aX&&(d=bH(bp.bridge))){var c=bP(aX);ay(d.style,{width:c.width+"px",height:c.height+"px",top:c.top+"px",left:c.left+"px",zIndex:""+aO(bh.zIndex)})}},bn=function(b){bp.ready===!0&&(bp.bridge&&"function"==typeof bp.bridge.setHandCursor?bp.bridge.setHandCursor(b):bp.ready=!1)},aO=function(d){if(/^(?:auto|inherit)$/.test(d)){return d}var c;return"number"!=typeof d||aI(d)?"string"==typeof d&&(c=aO(aK(d,10))):c=d,"number"==typeof c?c:"auto"},ao=function(B){function A(d){var c=d.match(/[\d]+/g);return c.length=3,c.join(".")}function z(b){return !!b&&(b=b.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(b)||"chrome.plugin"===b.slice(-13))}function y(b){b&&(u=!0,b.version&&(r=A(b.version)),!r&&b.description&&(r=A(b.description)),b.filename&&(s=z(b.filename)))}var x,w,v,u=!1,t=!1,s=!1,r="";if(aR.plugins&&aR.plugins.length){x=aR.plugins["Shockwave Flash"],y(x),aR.plugins["Shockwave Flash 2.0"]&&(u=!0,r="2.0.0.11")}else{if(aR.mimeTypes&&aR.mimeTypes.length){v=aR.mimeTypes["application/x-shockwave-flash"],x=v&&v.enabledPlugin,y(x)}else{if("undefined"!=typeof B){t=!0;try{w=new B("ShockwaveFlash.ShockwaveFlash.7"),u=!0,r=A(w.GetVariable("$version"))}catch(q){try{w=new B("ShockwaveFlash.ShockwaveFlash.6"),u=!0,r="6.0.21"}catch(m){try{w=new B("ShockwaveFlash.ShockwaveFlash"),u=!0,r=A(w.GetVariable("$version"))}catch(g){t=!1}}}}}}bp.disabled=u!==!0,bp.outdated=r&&aJ(r)<aJ(bo),bp.version=r||"0.0.0",bp.pluginType=s?"pepper":t?"activex":u?"netscape":"unknown"};ao(aM);var ag=function(){return this instanceof ag?void ("function"==typeof ag._createClient&&ag._createClient.apply(this,az(arguments))):new ag};aD(ag,"version",{value:"2.1.6",writable:!1,configurable:!0,enumerable:!0}),ag.config=function(){return bg.apply(this,az(arguments))},ag.state=function(){return be.apply(this,az(arguments))},ag.isFlashUnusable=function(){return bd.apply(this,az(arguments))},ag.on=function(){return bc.apply(this,az(arguments))},ag.off=function(){return ba.apply(this,az(arguments))},ag.handlers=function(){return a9.apply(this,az(arguments))},ag.emit=function(){return a8.apply(this,az(arguments))},ag.create=function(){return a7.apply(this,az(arguments))},ag.destroy=function(){return a6.apply(this,az(arguments))},ag.setData=function(){return a5.apply(this,az(arguments))},ag.clearData=function(){return a4.apply(this,az(arguments))},ag.getData=function(){return bJ.apply(this,az(arguments))},ag.focus=ag.activate=function(){return a2.apply(this,az(arguments))},ag.blur=ag.deactivate=function(){return bE.apply(this,az(arguments))},ag.activeElement=function(){return bf.apply(this,az(arguments))};var bR=0,bI={},bu=0,aV={},aq={};ay(bh,{autoActivate:!0});var ai=function(d){var c=this;c.id=""+bR++,bI[c.id]={instance:c,elements:[],handlers:{}},d&&c.clip(d),ag.on("*",function(b){return c.emit(b)}),ag.on("destroy",function(){c.destroy()}),ag.create()},bT=function(j,i){var p,o,n,m={},l=bI[this.id]&&bI[this.id].handlers;if("string"==typeof j&&j){n=j.toLowerCase().split(/\s+/)}else{if("object"==typeof j&&j&&"undefined"==typeof i){for(p in j){aC.call(j,p)&&"string"==typeof p&&p&&"function"==typeof j[p]&&this.on(p,j[p])}}}if(n&&n.length){for(p=0,o=n.length;o>p;p++){j=n[p].replace(/^on/,""),m[j]=!0,l[j]||(l[j]=[]),l[j].push(i)}if(m.ready&&bp.ready&&this.emit({type:"ready",client:this}),m.error){var k=["disabled","outdated","unavailable","deactivated","overdue"];for(p=0,o=k.length;o>p;p++){if(bp[k[p]]){this.emit({type:"error",name:"flash-"+k[p],client:this});break}}}}return this},bL=function(j,i){var p,o,n,m,l,k=bI[this.id]&&bI[this.id].handlers;if(0===arguments.length){m=aE(k)}else{if("string"==typeof j&&j){m=j.split(/\s+/)}else{if("object"==typeof j&&j&&"undefined"==typeof i){for(p in j){aC.call(j,p)&&"string"==typeof p&&p&&"function"==typeof j[p]&&this.off(p,j[p])}}}}if(m&&m.length){for(p=0,o=m.length;o>p;p++){if(j=m[p].toLowerCase().replace(/^on/,""),l=k[j],l&&l.length){if(i){for(n=l.indexOf(i);-1!==n;){l.splice(n,1),n=l.indexOf(i,n)}}else{l.length=0}}}}return this},bB=function(e){var d=null,f=bI[this.id]&&bI[this.id].handlers;return f&&(d="string"==typeof e&&e?f[e]?f[e].slice(0):[]:ax(f)),d},a1=function(d){if(bD.call(this,d)){"object"==typeof d&&d&&"string"==typeof d.type&&d.type&&(d=ay({},d));var c=ay({},am(d),{client:this});a3.call(this,c)}return this},at=function(e){e=av(e);for(var d=0;d<e.length;d++){if(aC.call(e,d)&&e[d]&&1===e[d].nodeType){e[d].zcClippingId?-1===aV[e[d].zcClippingId].indexOf(this.id)&&aV[e[d].zcClippingId].push(this.id):(e[d].zcClippingId="zcClippingId_"+bu++,aV[e[d].zcClippingId]=[this.id],bh.autoActivate===!0&&al(e[d]));var f=bI[this.id]&&bI[this.id].elements;-1===f.indexOf(e[d])&&f.push(e[d])}}return this},ak=function(h){var g=bI[this.id];if(!g){return this}var l,k=g.elements;h="undefined"==typeof h?k.slice(0):av(h);for(var j=h.length;j--;){if(aC.call(h,j)&&h[j]&&1===h[j].nodeType){for(l=0;-1!==(l=k.indexOf(h[j],l));){k.splice(l,1)}var i=aV[h[j].zcClippingId];if(i){for(l=0;-1!==(l=i.indexOf(this.id,l));){i.splice(l,1)}0===i.length&&(bh.autoActivate===!0&&ad(h[j]),delete h[j].zcClippingId)}}}return this},ac=function(){var b=bI[this.id];return b&&b.elements?b.elements.slice(0):[]},bN=function(){this.unclip(),this.off(),delete bI[this.id]},bD=function(h){if(!h||!h.type){return !1}if(h.client&&h.client!==this){return !1}var g=bI[this.id]&&bI[this.id].elements,l=!!g&&g.length>0,k=!h.target||l&&-1!==g.indexOf(h.target),j=h.relatedTarget&&l&&-1!==g.indexOf(h.relatedTarget),i=h.client&&h.client===this;return k||j||i?!0:!1},a3=function(v){if("object"==typeof v&&v&&v.type){var u=bF(v),t=bI[this.id]&&bI[this.id].handlers["*"]||[],s=bI[this.id]&&bI[this.id].handlers[v.type]||[],r=t.concat(s);if(r&&r.length){var q,p,o,n,m,e=this;for(q=0,p=r.length;p>q;q++){o=r[q],n=e,"string"==typeof o&&"function"==typeof aT[o]&&(o=aT[o]),"object"==typeof o&&o&&"function"==typeof o.handleEvent&&(n=o,o=o.handleEvent),"function"==typeof o&&(m=ay({},v),bm(o,n,[m],u))}}return this}},av=function(b){return"string"==typeof b&&(b=[]),"number"!=typeof b.length?[b]:b},al=function(e){if(e&&1===e.nodeType){var d=function(b){(b||(b=aT.event))&&("js"!==b._source&&(b.stopImmediatePropagation(),b.preventDefault()),delete b._source)},f=function(a){(a||(a=aT.event))&&(d(a),ag.focus(e))};e.addEventListener("mouseover",f,!1),e.addEventListener("mouseout",d,!1),e.addEventListener("mouseenter",d,!1),e.addEventListener("mouseleave",d,!1),e.addEventListener("mousemove",d,!1),aq[e.zcClippingId]={mouseover:f,mouseout:d,mouseenter:d,mouseleave:d,mousemove:d}}},ad=function(i){if(i&&1===i.nodeType){var h=aq[i.zcClippingId];if("object"==typeof h&&h){for(var n,m,l=["move","leave","enter","out","over"],k=0,j=l.length;j>k;k++){n="mouse"+l[k],m=h[n],"function"==typeof m&&i.removeEventListener(n,m,!1)}delete aq[i.zcClippingId]}}};ag._createClient=function(){ai.apply(this,az(arguments))},ag.prototype.on=function(){return bT.apply(this,az(arguments))},ag.prototype.off=function(){return bL.apply(this,az(arguments))},ag.prototype.handlers=function(){return bB.apply(this,az(arguments))},ag.prototype.emit=function(){return a1.apply(this,az(arguments))},ag.prototype.clip=function(){return at.apply(this,az(arguments))},ag.prototype.unclip=function(){return ak.apply(this,az(arguments))},ag.prototype.elements=function(){return ac.apply(this,az(arguments))},ag.prototype.destroy=function(){return bN.apply(this,az(arguments))},ag.prototype.setText=function(b){return ag.setData("text/plain",b),this},ag.prototype.setHtml=function(b){return ag.setData("text/html",b),this},ag.prototype.setRichText=function(b){return ag.setData("application/rtf",b),this},ag.prototype.setData=function(){return ag.setData.apply(this,az(arguments)),this},ag.prototype.clearData=function(){return ag.clearData.apply(this,az(arguments)),this},ag.prototype.getData=function(){return ag.getData.apply(this,az(arguments))},"function"==typeof define&&define.amd?define(function(){return ag}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=ag:aZ.ZeroClipboard=ag}(function(){return this||window}());APP_COUPONSINC.rate=(function(d){var b={bcookieId:ratingBcookieId,timestamp:ratingTimestamp,sig:ratingSignature};function c(g){g.stopPropagation();a("1",ratingRetailerId)}function f(g){g.stopPropagation();a("0",ratingRetailerId)}function a(g,h){b.rate=g;b.merchant_id=h;d.ajax({url:"/cc/rate/",type:"GET",data:d.param(b),success:function(j,k,i){this.updateCookieAndRates();d(".store-rating-top").animate({height:0,},500);d(".store-rating-feedback-divider").animate({height:25},500);d(".store-rating-feedback .rate-success").animate({height:50},500);setTimeout(function(){d(".store-rating-divider").hide();d(".store-rating-feedback-divider").animate({height:0},500);d(".store-rating-feedback .rate-success").animate({height:0},500)},2000)},error:function(k,i,j){d(".store-rating-feedback .rate-error").animate({height:50},500);setTimeout(function(){d(".store-rating-feedback .rate-error").animate({height:0},500)},2000)},updateCookieAndRates:function(){var j=d("#total_rates");if(j.length>0&&parseInt(total_rates)>5){j.contents()[0].data=parseInt(total_rates)+1}var i=d.cookie("storeRating");if(i==null){d.cookie("storeRating","s"+ratingRetailerId+"s",{expires:36500,path:"/",domain:"coupons.com"})}else{d.cookie("storeRating",i+ratingRetailerId+"s",{expires:36500,path:"/",domain:"coupons.com"})}}})}function e(){d(".recommend-yes").bind("click",c);d(".recommend-no").bind("click",f)}return{onReady:e}})(jQuery);jQuery(document).ready(function(){APP_COUPONSINC.rate.onReady()});(function(c){var a="input.mask";var b=(window.orientation!=undefined);c.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"};c.extend(c.fn,{caret:function(f,d){if(this.length==0){return}if(typeof f=="number"){d=(typeof d=="number")?d:f;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(f,d)}else{if(this.createTextRange){var g=this.createTextRange();g.collapse(true);g.moveEnd("character",d);g.moveStart("character",f);g.select()}}})}else{if(this[0].setSelectionRange){f=this[0].selectionStart;d=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var e=document.selection.createRange();f=0-e.duplicate().moveStart("character",-100000);d=f+e.text.length}}return{begin:f,end:d}}},unmask:function(){return this.trigger("unmask")},mask:function(f,j){if(!f&&this.length>0){var g=c(this[0]);return g.data(c.mask.dataName)()}j=c.extend({placeholder:"_",completed:null},j);var e=c.mask.definitions;var i=[];var k=f.length;var h=null;var d=f.length;c.each(f.split(""),function(l,m){if(m=="?"){d--;k=l}else{if(e[m]){i.push(new RegExp(e[m]));if(h==null){h=i.length-1}}else{i.push(null)}}});return this.trigger("unmask").each(function(){var u=c(this);var p=c.map(f.split(""),function(y,x){if(y!="?"){return e[y]?j.placeholder:y}});var w=u.val();function t(x){while(++x<=d&&!i[x]){}return x}function q(x){while(--x>=0&&!i[x]){}return x}function o(A,x){if(A<0){return}for(var z=A,y=t(x);z<d;z++){if(i[z]){if(y<d&&i[z].test(p[y])){p[z]=p[y];p[y]=j.placeholder}else{break}y=t(y)}}s();u.caret(Math.max(h,A))}function l(B){for(var z=B,A=j.placeholder;z<d;z++){if(i[z]){var x=t(z);var y=p[z];p[z]=A;if(x<d&&i[x].test(y)){A=y}else{break}}}}function r(A){var y=A.which;if(y==8||y==46||(b&&y==127)){var B=u.caret(),z=B.begin,x=B.end;if(x-z==0){z=y!=46?q(z):(x=t(z-1));x=y==46?t(x):x}m(z,x);o(z,x-1);return false}else{if(y==27){u.val(w);u.caret(0,n());return false}}}function v(A){var x=A.which,C=u.caret();if(A.ctrlKey||A.altKey||A.metaKey||x<32){return true}else{if(x){if(C.end-C.begin!=0){m(C.begin,C.end);o(C.begin,C.end-1)}var z=t(C.begin-1);if(z<d){var B=String.fromCharCode(x);if(i[z].test(B)){l(z);p[z]=B;s();var y=t(z);u.caret(y);if(j.completed&&y>=d){j.completed.call(u)}}}return false}}}function m(z,x){for(var y=z;y<x&&y<d;y++){if(i[y]){p[y]=j.placeholder}}}function s(){return u.val(p.join("")).val()}function n(y){var C=u.val();var B=-1;for(var x=0,A=0;x<d;x++){if(i[x]){p[x]=j.placeholder;while(A++<C.length){var z=C.charAt(A-1);if(i[x].test(z)){p[x]=z;B=x;break}}if(A>C.length){break}}else{if(p[x]==C.charAt(A)&&x!=k){A++;B=x}}}if(!y&&B+1<k){u.val("");m(0,d)}else{if(y||B+1>=k){s();if(!y){u.val(u.val().substring(0,B+1))}}}return(k?x:h)}(c.mask.dataName,function(){return c.map(p,function(y,x){return i[x]&&y!=j.placeholder?y:null}).join("")});if(!u.attr("readonly")){u.one("unmask",function(){u.unbind(".mask").removeData(c.mask.dataName)}).bind("focus.mask",function(){w=u.val();var y=n();s();var x=function(){if(y==f.length){u.caret(0,y)}else{u.caret(y)}};(function(){setTimeout(x,0)})()}).bind("blur.mask",function(){n();if(u.val()!=w){u.change()}}).bind("keydown.mask",r).bind("keypress.mask",v).bind(a,function(){setTimeout(function(){u.caret(n(true))},0)})}n()})}})})(window.jQuery||window.Zepto||window.$);APP_COUPONSINC.intronagbar=(function(d){var a,h="urbannag",l={"privacy-policy":{cookie:"urbannag",height:((d==window.jQuery)?97:65),hidden:false},"uk-cookie-policy":{cookie:"ukcnag",height:((d==window.jQuery)?75:65),hidden:false}},c=1000,k=(APP_COUPONSINC.contextData.controller==="home")?130:80,j=d(document),f=d(".mod-intronagbar"),i=false;function b(r){var q=d(".intro-content");if(typeof r!=="undefined"){q=d(r.currentTarget).parents(".msg-container")}var s="urbannag",n=f.height()-q.height()-10,p=l[q.attr("data-nagid")]["cookie"];if(d==window.jQuery){q.slideUp("slow",function(){j.trigger("couponsinc:nagmsg",{status:"closed"})})}else{q.hide()}l[q.attr("data-nagid")]["hidden"]=true;var m=0;for(var o in l){if(!l[o]["hidden"]){m++}}if(m===0){if(d==window.jQuery){f.slideUp("slow",function(){j.trigger("couponsinc:intronagbar",{status:"closed"});d(window).off("scroll.nag")})}else{f.hide()}d(window).off("scroll.nag")}else{if(d==window.jQuery){f.animate({height:n+"px"},"slow","linear")}else{f.css("height",n+"px")}}if(typeof r!=="undefined"){d.cookie(p,1,{path:"/",expires:c})}}function e(){var n=0;var r=0;for(var p in l){if(l.hasOwnProperty(p)){if((d.cookie(l[p]["cookie"])!=1)&&(d("[data-nagid='"+p+"']").length>0)){d("[data-nagid='"+p+"']").css("display","inline-block");d("[data-nagid='"+p+"'] .close-btn").bind("click",b);n++;r=(n>1)?159:l[p]["height"]}else{l[p]["hidden"]=true}}}if(n>0){var o=new Date(2018,0,15);var m=new Date(2018,1,20);var q=new Date();var s=q>=o&&q<=m;if(d==window.jQuery){if(s){setTimeout(function(){f.removeClass("hidden");f.animate({height:r+"px"},1000,"linear",function(){d(".close-btn",f).removeClass("hidden");i=true;j.trigger("couponsinc:intronagbar",{status:"opened"});setTimeout(function(){d(window).on("scroll.nag",function(){f.slideUp("slow",function(){j.trigger("couponsinc:intronagbar",{status:"closed"})});d(window).off("scroll.nag")})},1000)})},1000)}}else{if(s){d(f).css("display","inline-block");d(".close-btn").removeClass("hidden");i=true;j.trigger("couponsinc:intronagbar",{status:"opened"});setTimeout(function(){d(window).on("scroll.nag",function(){d(f).hide();d(window).off("scroll.nag")})},1000)}}}}function g(m){a=m||this;setTimeout(function(){e()},1000)}return{onReady:g}})(window.jQuery||window.Zepto||window.$);$(document).ready(function(){APP_COUPONSINC.intronagbar.onReady()});APP_COUPONSINC.favorite=(function(h){var s=false;function q(v){var w=h(v);if(v.target){w=h(v.target)}if(w.hasClass("fav-mod-tab")){t()}else{if(w.hasClass("js-h1")){e()}}}function e(){h(".fav-mod-tab").removeClass("selected");h(".h1-fav .js-h1").addClass("selected");h(".fav-mod-container").addClass("hidden");h(".home-top-codes-container").show();h(".manage-favorite-stores").addClass("hidden")}function t(){h(".fav-mod-tab").addClass("selected");h(".h1-fav .js-h1").removeClass("selected");h(".fav-mod-container").removeClass("hidden");h(".home-top-codes-container").hide();h(".manage-favorite-stores").removeClass("hidden")}function p(v){h.modalPopup.open({url:"/coupon-codes/favorite/popup/",maxWidth:877,callbacks:{success:function(){h(".favorite-store-popup-item").bind("click",f);h("#favorite-popup .favoite-done-btn").bind("click",m)},popupClose:function(){if(!h.cookie("favoriteStoresLogin")&&!userLoggedIn){c(true)}else{if(s==true){location.reload()}}}}})}function m(v){h.modalPopup.close()}function o(v){h.modalPopup.close()}function c(v){if(v==true){h.cookie("favoriteStoresLogin","yes",{path:"/coupon-codes/",domain:"coupons.com"})}if(h("#signup-popup").length>0){h.modalPopup.open({target:"#signup-popup",maxWidth:780,callbacks:{open:function(){k()},popupClose:function(){if(s==true){location.reload()}}}})}}function k(){var x=window.addEventListener?"addEventListener":"attachEvent";var w=window[x];var v=x=="attachEvent"?"onmessage":"message";w(v,function(y){if(y.data=="couponsinc:signupSuccess"||y.data=="couponsinc:signinSuccess"){s=true;h.modalPopup.close()}},false)}function j(x){var y=h(x);if(x.target){y=h(x.target)}var v=y.parents(".ccode-popularstores-item-container").attr("id");if(v){v=v.substr(1);if(y.hasClass("selected")){y.removeClass("selected");a(v,false,false)}else{var w=h.cookie("favNumForAutoPopup");if(!w){w=0}w++;h.cookie("favNumForAutoPopup",w,{path:"/coupon-codes/",domain:"coupons.com"});y.addClass("selected");a(v,true,false);if(!userLoggedIn&&w>=3&&!h.cookie("favoriteStoresLogin")){c(true)}}}}function f(w){var x=h(w);if(w.target){x=h(w.target)}var v=x.attr("id");if(v==undefined||v==""){x=x.parents(".favorite-store-popup-item");v=x.attr("id")}if(x.hasClass("selected")){x.removeClass("selected");a(v,false,true)}else{x.addClass("selected");a(v,true,true)}}function g(){if(h(".favorite-store .fav-icon").hasClass("selected")){h(".favorite-store .fav-icon").removeClass("selected");h(".favorite-store").removeClass("selected");h(".favorite-store .msg").text("Add to Your Favorites");a(ratingRetailerId,false,false)}else{h(".favorite-store .fav-icon").addClass("selected");h(".favorite-store").addClass("selected");h(".favorite-store .msg").text("");if(!userLoggedIn){h(".favorite-confirm").removeClass("hidden")}a(ratingRetailerId,true,false)}}function d(){h(".favorite-confirm").addClass("hidden")}function r(x){x.preventDefault();var y=h(x);if(x.target){y=h(x.target)}var v=y.attr("id");if(v){if(y.hasClass("selected")){y.removeClass("selected");a(v,false,false)}else{var w=h.cookie("favNumForAutoPopup");if(!w){w=0}w++;h.cookie("favNumForAutoPopup",w,{path:"/coupon-codes/",domain:"coupons.com"});y.addClass("selected");a(v,true,false);if(!userLoggedIn&&w>=3&&!h.cookie("favoriteStoresLogin")){c(true)}}}}function a(v,x,w){if(w==true){s=true}if(userLoggedIn){u(v,x,w)}else{n(v,x,w)}}function n(v,y,w){var x=h.cookie("favoriteStores");if(y){if(!x){h.cookie("favoriteStores","s"+v+"s",{expires:36500,path:"/coupon-codes/",domain:"coupons.com"})}else{if(x.indexOf("s"+v+"s")>=0){}else{h.cookie("favoriteStores",x+v+"s",{expires:36500,path:"/coupon-codes/",domain:"coupons.com"})}}}else{if(!x){}else{if(x.indexOf("s"+v+"s")>=0){h.cookie("favoriteStores",x.replace("s"+v+"s","s"),{expires:36500,path:"/coupon-codes/",domain:"coupons.com"})}else{}}}}function u(v,z,x){if(z){var w="/cc/addfavorite";var y={storeid:v};h.ajax({url:w,type:"post",data:y,success:function(B,C,A){},error:function(A){n(v,z,x)}})}else{var w="/cc/removefavorite";var y={storeid:v};h.ajax({url:w,type:"post",data:y,success:function(B,C,A){},error:function(A){}})}}function i(A){A.preventDefault();var x=h.trim(h("#sms-number").val());var y=l(x);if(y){var x,z,C;x=x.replace(/[^0-9]/g,"");z="Follow this link to get the App: http://tinyurl.com/nlr2xyv";C={phoneNumber:x,message:z,is_app_download:true};var w="/cc/sendsms";var v=JSON.stringify(C);var B=JSON.parse(v);h.ajax({url:w,type:"post",data:C,success:function(E,F,D){h(".smsfootage").hide();h(".smserrmsg").addClass("hidden");h(".sms-success-container").removeClass("hidden")},error:function(D){h(".smserrmsg").removeClass("hidden")}})}else{h(".smserrmsg").removeClass("hidden")}}function l(w){var v=/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/;return v.test(w)}function b(){h(".h1-fav").bind("click",q);h(".fav-start-btn").bind("click",p);h(".ccode-popularstores-item-container .fav-icon").bind("click",j);h(".skip-login").bind("click",o);h("#submit_sms_for_app_download").on("submit",i);if(window.location.hash&&window.location.hash==="#fav"){t()}h("#sms-number").mask("(999) 999-9999");h(".favorite-store").bind("click",g);h(".close_favorite_confirm").bind("click",d);h(".js-see-store.store-pod .fav-icon").bind("click",r)}return{onReady:b}})(jQuery);jQuery(document).ready(function(){APP_COUPONSINC.favorite.onReady()});APP_COUPONSINC.dealImageLoader=(function(a){function b(){var c=a(".store-icon.js-see-deal");c.each(function(d){var e=a(this).attr("data_img");a(this).attr("style","background-image:url("+e+")")})}return{onReady:b}})(jQuery);jQuery(window).load(function(){APP_COUPONSINC.dealImageLoader.onReady()});APP_COUPONSINC.store_pagination=(function(d){var f=d(window),c=0,h=Number(d("#pageStart").text()),b=Number(d("#pageSize").text()),g=Number(d("#retailerId").text());function a(){var k=f.scrollTop();var j=d(".expired-coupon").position();if(j==undefined){j=d(".dividergray").position()}var i=d(".querystring").text();if(c<h){if(k>j.top-this.outerHeight){c=h;d.ajax({type:"GET",url:"/cc/couponcodes/storepage/"+g+"/"+h+"/"+b+"/coupon.json?querystring="+encodeURIComponent(i),dataType:"json",success:function(l){if(l.hashMapList.length>0){d("#podTemplate").tmpl(l.hashMapList,{querystring:i}).appendTo("#original")}if(l.hashMapList.length>=b){h=h+b}else{h=-1}},error:function(l){console.log("error in get next store page.")}})}}}function e(){f.scroll(a)}return{onReady:e}})(window.jQuery||window.Zepto||window.$);$(document).ready(function(){APP_COUPONSINC.store_pagination.onReady()});